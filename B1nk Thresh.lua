--[[


 -- B1nk Thresh
 -- 更多分享Q群:384232347
 -- by B1nk


--]]

assert(load(Base64Decode("aWYgbXlIZXJvLmNoYXJOYW1lIH49ICJUaHJlc2giIHRoZW4gcmV0dXJuIGVuZA0KDQppZiBub3QgVklQX1VTRVIgdGhlbiByZXR1cm4gUHJpbnRDaGF0KCJUaHJlc2ggLSBNYXN0ZXIgb2YgSG9vayAtIFlvdSdyZSBub3QgYSBWSVAgVVNFUi4iKSBlbmQNCg0KbG9jYWwgdmVyc2lvbiA9ICIwLjUiDQpsb2NhbCBBVVRPVVBEQVRFID0gZmFsc2UNCg0KDQpsb2NhbCBTQ1JJUFRfTkFNRSA9ICJCMW5rVGhyZXNoIg0KbG9jYWwgU09VUkNFTElCX1VSTCA9ICJodHRwczovL3Jhdy5naXRodWIuY29tL1RoZVJlYWxTb3VyY2UvcHVibGljL21hc3Rlci9jb21tb24vU291cmNlTGliLmx1YSINCmxvY2FsIFNPVVJDRUxJQl9QQVRIID0gTElCX1BBVEguLiJTb3VyY2VMaWIubHVhIg0KaWYgRmlsZUV4aXN0KFNPVVJDRUxJQl9QQVRIKSB0aGVuDQoJcmVxdWlyZSgiU291cmNlTGliIikNCmVsc2UNCglET1dOTE9BRElOR19TT1VSQ0VMSUIgPSB0cnVlDQoJRG93bmxvYWRGaWxlKFNPVVJDRUxJQl9VUkwsIFNPVVJDRUxJQl9QQVRILCBmdW5jdGlvbigpIHByaW50KCJSZXF1aXJlZCBsaWJyYXJpZXMgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHksIHBsZWFzZSByZWxvYWQiKSBlbmQpDQplbmQNCg0KaWYgRE9XTkxPQURJTkdfU09VUkNFTElCIHRoZW4gcHJpbnQoIkRvd25sb2FkaW5nIHJlcXVpcmVkIGxpYnJhcmllcywgcGxlYXNlIHdhaXQuLi4iKSByZXR1cm4gZW5kDQoNCmlmIEFVVE9VUERBVEUgdGhlbg0KU291cmNlVXBkYXRlcihTQ1JJUFRfTkFNRSwgdmVyc2lvbiwgInJhdy5naXRodWIuY29tIiwgIi9CMW5rL0JvbC1TdHVkaW8vbWFzdGVyLyIuLlNDUklQVF9OQU1FLi4iLmx1YSIsIFNDUklQVF9QQVRIIC4uIEdldEN1cnJlbnRFbnYoKS5GSUxFX05BTUUsICIvQjFuay9WZXJzaW9uRmlsZXMvbWFzdGVyLyIuLlNDUklQVF9OQU1FLi4iLnZlcnNpb24iKTpDaGVja1VwZGF0ZSgpDQplbmQNCg0KbG9jYWwgUmVxdWlyZUkgPSBSZXF1aXJlKCJTb3VyY2VMaWIiKQ0KUmVxdWlyZUk6QWRkKCJ2UHJlZGljdGlvbiIsICJodHRwczovL3Jhdy5naXRodWIuY29tL0hlbGxzaW5nL0JvTC9tYXN0ZXIvY29tbW9uL1ZQcmVkaWN0aW9uLmx1YSIpDQpSZXF1aXJlSTpBZGQoIlNPVyIsICJodHRwczovL3Jhdy5naXRodWIuY29tL0hlbGxzaW5nL0JvTC9tYXN0ZXIvY29tbW9uL1NPVy5sdWEiKQ0KaWYgVklQX1VTRVIgdGhlbg0KCVJlcXVpcmVJOkFkZCgiUHJvZGljdGlvbiIsICJodHRwczovL2JpdGJ1Y2tldC5vcmcvS2xva2plL3B1YmxpYy1rbG9ramVzLWJvbC1zY3JpcHRzL3Jhdy9lYzgzMGZhY2NjZWZiM2I1MjIxMmRiYTU2OTZjMDg2OTdjM2MyODU0L1Rlc3QvUHJvZGljdGlvbi9Qcm9kaWN0aW9uLmx1YSIpDQoJUmVxdWlyZUk6QWRkKCJDb2xsaXNpb24iLCAiaHR0cHM6Ly9iaXRidWNrZXQub3JnL0tsb2tqZS9wdWJsaWMta2xva2plcy1ib2wtc2NyaXB0cy9yYXcvYjg5MTY5OWU3MzlmNzdmNzdmZDQyOGU3NGRlYzAwYjJhNjkyZmRlZi9Db21tb24vQ29sbGlzaW9uLmx1YSIpDQplbmQNCg0KUmVxdWlyZUk6Q2hlY2soKQ0KDQppZiBSZXF1aXJlSS5kb3dubG9hZE5lZWRlZCA9PSB0cnVlIHRoZW4gcmV0dXJuIGVuZA0KDQotLSBbQm9sIFRyYWNrZXJdIC0tDQoNCi0tIFRoZXNlIHZhcmlhYmxlcyBuZWVkIHRvIGJlIG5lYXIgdGhlIHRvcCBvZiB5b3VyIHNjcmlwdCBzbyB5b3UgY2FuIGNhbGwgdGhlbSBpbiB5b3VyIGNhbGxiYWNrcy4NCkhXSUQgPSBCYXNlNjRFbmNvZGUodG9zdHJpbmcob3MuZ2V0ZW52KCJQUk9DRVNTT1JfSURFTlRJRklFUiIpLi5vcy5nZXRlbnYoIlVTRVJOQU1FIikuLm9zLmdldGVudigiQ09NUFVURVJOQU1FIikuLm9zLmdldGVudigiUFJPQ0VTU09SX0xFVkVMIikuLm9zLmdldGVudigiUFJPQ0VTU09SX1JFVklTSU9OIikpKQ0KLS0gRE8gTk9UIENIQU5HRS4gVGhpcyBpcyBzZXQgdG8geW91ciBwcm9wZXIgSUQuDQppZCA9IDIyNQ0KDQotLSBDSEFOR0UgTUUuIE1ha2UgdGhpcyB0aGUgZXhhY3Qgc2FtZSBuYW1lIGFzIHRoZSBzY3JpcHQgeW91IGFkZGVkIGludG8gdGhlIHNpdGUhDQpTY3JpcHROYW1lID0gIkIxbmtUaHJlc2giDQoNCi0tIFRoYW5rIHlvdSB0byBSb2FjaCBhbmQgQmlsYmFvIGZvciB0aGUgc3VwcG9ydCENCmFzc2VydChsb2FkKEJhc2U2NERlY29kZSgiRzB4MVlWSUFBUVFFQkFnQUdaTU5DaG9LQUFBQUFBQUFBQUFBQVFJREFBQUFKUUFBQUFnQUFJQWZBSUFBQVFBQUFBUUtBQUFBVlhCa1lYUmxWMlZpQUFFQUFBQUNBQUFBREFBQUFBUUFFVFVBQUFBR0FVQUFRVUVBQUIyQkFBRkdnVUFBaDhGQUFwMEJnQUJkZ1FBQWpBSEJBZ0ZDQVFCQmdnRUFuVUVBQWhzQUFBQVh3QU9Bak1IQkFnRUNBZ0JBQWdBQmdVSUNBTUFDZ0FFQmd3SUFSc05DQUVjRHd3YUFBNEFBd1VNREFBR0VBd0JkZ3dBQ2djTURBQmFDQXdTZFFZQUJGNEFEZ0l6QndRSUJBZ1FBUUFJQUFZRkNBZ0RBQW9BQkFZTUNBRWJEUWdCSEE4TUdnQU9BQU1GREF3QUJoQU1BWFlNQUFvSERBd0FXZ2dNRW5VR0FBWXdCeFFJQlFnVUFuUUdCQVFnQWdva0l3QUdKQ0lDQmlJeUJ4UUtkUVFBQkh3Q0FBQmNBQUFBRUNBQUFBSEpsY1hWcGNtVUFCQWNBQUFCemIyTnJaWFFBQkFjQUFBQmhjM05sY25RQUJBUUFBQUIwWTNBQUJBZ0FBQUJqYjI1dVpXTjBBQVFRQUFBQVltOXNMWFJ5WVdOclpYSXVZMjl0QUFNQUFBQUFBQUJVUUFRRkFBQUFjMlZ1WkFBRUdBQUFBRWRGVkNBdmNtVnpkQzl1Wlhkd2JHRjVaWEkvYVdROUFBUUhBQUFBSm1oM2FXUTlBQVFOQUFBQUpuTmpjbWx3ZEU1aGJXVTlBQVFIQUFBQWMzUnlhVzVuQUFRRkFBQUFaM04xWWdBRURRQUFBRnRlTUMwNVFTMWFZUzE2WFFBRUFRQUFBQUFFSlFBQUFDQklWRlJRTHpFdU1BMEtTRzl6ZERvZ1ltOXNMWFJ5WVdOclpYSXVZMjl0RFFvTkNnQUVHd0FBQUVkRlZDQXZjbVZ6ZEM5a1pXeGxkR1Z3YkdGNVpYSS9hV1E5QUFRQ0FBQUFjd0FFQndBQUFITjBZWFIxY3dBRUNBQUFBSEJoY25ScFlXd0FCQWdBQUFCeVpXTmxhWFpsQUFRREFBQUFLbUVBQkFZQUFBQmpiRzl6WlFBQUFBQUFBUUFBQUFBQUVBQUFBRUJ2WW1aMWMyTmhkR1ZrTG14MVlRQTFBQUFBQWdBQUFBSUFBQUFDQUFBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFNQUFBQURBQUFBQXdBQUFBTUFBQUFFQUFBQUJBQUFBQVVBQUFBRkFBQUFCUUFBQUFZQUFBQUdBQUFBQndBQUFBY0FBQUFIQUFBQUJ3QUFBQWNBQUFBSEFBQUFCd0FBQUFnQUFBQUhBQUFBQlFBQUFBZ0FBQUFKQUFBQUNRQUFBQWtBQUFBS0FBQUFDZ0FBQUFzQUFBQUxBQUFBQ3dBQUFBc0FBQUFMQUFBQUN3QUFBQXNBQUFBTUFBQUFDd0FBQUFrQUFBQU1BQUFBREFBQUFBd0FBQUFNQUFBQURBQUFBQXdBQUFBTUFBQUFEQUFBQUF3QUFBQUdBQUFBQWdBQUFHRUFBQUFBQURVQUFBQUNBQUFBWWdBQUFBQUFOUUFBQUFJQUFBQmpBQUFBQUFBMUFBQUFBZ0FBQUdRQUFBQUFBRFVBQUFBREFBQUFYMkVBQXdBQUFEVUFBQUFEQUFBQVlXRUFCd0FBQURVQUFBQUJBQUFBQlFBQUFGOUZUbFlBQVFBQUFBRUFFQUFBQUVCdlltWjFjMk5oZEdWa0xteDFZUUFEQUFBQURBQUFBQUlBQUFBTUFBQUFBQUFBQUFFQUFBQUZBQUFBWDBWT1ZnQT0iKSwgbmlsLCAiYnQiLCBfRU5WKSkoKQ0KDQoNCi0tIEF1dG8gVXBkYXRlciAtLQ0KDQotLS0gQm9MIFNjcmlwdCBTdGF0dXMgQ29ubmVjdG9yIC0tLSANCmxvY2FsIFNjcmlwdEtleSA9ICJPQkVBSUNFSEFFQSIgLS0gWW91ciBzY3JpcHQgYXV0aCBrZXkNCmxvY2FsIFNjcmlwdFZlcnNpb24gPSAiIi4udmVyc2lvbi4uIiIgLS0gTGVhdmUgYmxhbmsgaWYgdmVyc2lvbiB1cmwgaXMgbm90IHJlZ2lzdHJlZA0KDQotLSBUaGFua3MgdG8gQmlsYmFvIGZvciBoaXMgc29ja2V0IGhlbHAgJiBlbmNyeXB0aW9uDQphc3NlcnQobG9hZChCYXNlNjREZWNvZGUoIkcweDFZVklBQVFRRUJBZ0FHWk1OQ2hvS0FBQUFBQUFBQUFBQUFRSUtBQUFBQmdCQUFFRkFBQUFkUUFBQkJrQkFBR1VBQUFBS1FBQ0JCa0JBQUdWQUFBQUtRSUNCSHdDQUFBUUFBQUFFQmdBQUFHTnNZWE56QUFRSkFBQUFRbTlzUW05dmMzUUFCQWNBQUFCZlgybHVhWFFBQkFrQUFBQlRaVzVrVTNsdVl3QUNBQUFBQWdBQUFBb0FBQUFEQUFzL0FBQUF4Z0JBQUFaQlFBQkFBWUFBSFlFQUFWaUFRQUlYUUFHQUJrRkFBRUFCQUFFZGdRQUJXSUJBQWhjQUFJQURRUUFBQXdHQUFFSEJBQURkUUlBQkNvQUFnZ3BBZ0lMR3dFRUFBWUVCQU4yQUFBRUt3QUNEeGdCQUFBZUJRUUFIQVVJQ0hRR0FBTjJBQUFBS3dBQ0V4b0JDQUFiQlFnQkdBVU1BUjBIREFvR0JBd0JkZ1FBQmhnRkRBSWRCUXdQQndRTUFuWUVBQWNZQlF3REhRY01EQVFJRUFOMkJBQUVHQWtNQUIwSkRCRUZDQkFBZGdnQUJSZ0pEQUVkQ3d3U0JnZ1FBWFlJQUFWWkJnZ0lkQVFBQjNZQUFBQXJBZ0lUTXdFUUFRd0dBQU4xQWdBSEdBRVVBSlFFQUFOMUFBQUhHUUVVQUpVRUFBTjFBQUFFZkFJQUFGZ0FBQUFRSEFBQUFZWE56WlhKMEFBUUZBQUFBZEhsd1pRQUVCd0FBQUhOMGNtbHVad0FFSHdBQUFFSnZUR0l3TUhOME9pQlhjbTl1WnlCaGNtZDFiV1Z1ZENCMGVYQmxMZ0FFQ0FBQUFIWmxjbk5wYjI0QUJBVUFBQUJ5YTJWNUFBUUhBQUFBYzI5amEyVjBBQVFJQUFBQWNtVnhkV2x5WlFBRUJBQUFBSFJqY0FBRUJRQUFBR2gzYVdRQUJBMEFBQUJDWVhObE5qUkZibU52WkdVQUJBa0FBQUIwYjNOMGNtbHVad0FFQXdBQUFHOXpBQVFIQUFBQVoyVjBaVzUyQUFRVkFBQUFVRkpQUTBWVFUwOVNYMGxFUlU1VVNVWkpSVklBQkFrQUFBQlZVMFZTVGtGTlJRQUVEUUFBQUVOUFRWQlZWRVZTVGtGTlJRQUVFQUFBQUZCU1QwTkZVMU5QVWw5TVJWWkZUQUFFRXdBQUFGQlNUME5GVTFOUFVsOVNSVlpKVTBsUFRnQUVDUUFBQUZObGJtUlRlVzVqQUFRVUFBQUFRV1JrUW5WbmMzQnNZWFJEWVd4c1ltRmphd0FFRWdBQUFFRmtaRlZ1Ykc5aFpFTmhiR3hpWVdOckFBSUFBQUFKQUFBQUNRQUFBQUFBQXdVQUFBQUZBQUFBREFCQUFJTUFBQUFkUUlBQkh3Q0FBQUVBQUFBRUNRQUFBRk5sYm1SVGVXNWpBQUFBQUFBQkFBQUFBUUFRQUFBQVFHOWlablZ6WTJGMFpXUXViSFZoQUFVQUFBQUpBQUFBQ1FBQUFBa0FBQUFKQUFBQUNRQUFBQUFBQUFBQkFBQUFCUUFBQUhObGJHWUFDZ0FBQUFvQUFBQUFBQU1GQUFBQUJRQUFBQXdBUUFDREFBQUFIVUNBQVI4QWdBQUJBQUFBQkFrQUFBQlRaVzVrVTNsdVl3QUFBQUFBQVFBQUFBRUFFQUFBQUVCdlltWjFjMk5oZEdWa0xteDFZUUFGQUFBQUNnQUFBQW9BQUFBS0FBQUFDZ0FBQUFvQUFBQUFBQUFBQVFBQUFBVUFBQUJ6Wld4bUFBRUFBQUFBQUJBQUFBQkFiMkptZFhOallYUmxaQzVzZFdFQVB3QUFBQU1BQUFBREFBQUFBd0FBQUFNQUFBQURBQUFBQXdBQUFBTUFBQUFEQUFBQUF3QUFBQU1BQUFBREFBQUFBd0FBQUFNQUFBQURBQUFBQXdBQUFBTUFBQUFEQUFBQUF3QUFBQU1BQUFBREFBQUFBd0FBQUFRQUFBQUVBQUFBQkFBQUFBUUFBQUFFQUFBQUJBQUFBQVVBQUFBRkFBQUFCUUFBQUFVQUFBQUZBQUFBQlFBQUFBWUFBQUFHQUFBQUJnQUFBQVlBQUFBSEFBQUFCd0FBQUFjQUFBQUhBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFDQUFBQUFnQUFBQUlBQUFBQlFBQUFBVUFBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFDUUFBQUFrQUFBQUpBQUFBQ2dBQUFBb0FBQUFLQUFBQUNnQUFBQU1BQUFBRkFBQUFjMlZzWmdBQUFBQUFQd0FBQUFJQUFBQmhBQUFBQUFBL0FBQUFBZ0FBQUdJQUFBQUFBRDhBQUFBQkFBQUFCUUFBQUY5RlRsWUFDd0FBQUJJQUFBQUNBQThpQUFBQWh3QkFBSXhBUUFFQmdRQUFRY0VBQUoxQUFBSmJBQUFBRjBBQWdBcEFRWUlYQUFDQUNvQkJnb2NBUUFDTXdFRUJBUUVDQUVkQlFnQ0JnUUlBeHdGQkFBR0NBZ0JHd2tJQVJ3TERCSUdDQWdESFFrTUFBWU1DQUVlRFF3Q0J3d01BRm9FREFwMUFnQUdIQUVBQWpBQkVBUUZCQkFDZEFJRUJSd0ZBQUV5QnhBSmRRUUFCSHdDQUFCTUFBQUFFQkFBQUFIUmpjQUFFQ0FBQUFHTnZibTVsWTNRQUJBMEFBQUJpYjJ3dVlqQXdjM1F1WlhVQUF3QUFBQUFBQUZSQUJBY0FBQUJ5WlhCdmNuUUFCQUlBQUFBd0FBUUNBQUFBTVFBRUJRQUFBSE5sYm1RQUJBMEFBQUJIUlZRZ0wzVndaR0YwWlMwQUJBVUFBQUJ5YTJWNUFBUUNBQUFBTFFBRUJ3QUFBRzE1U0dWeWJ3QUVDUUFBQUdOb1lYSk9ZVzFsQUFRSUFBQUFkbVZ5YzJsdmJnQUVCUUFBQUdoM2FXUUFCQ0lBQUFBZ1NGUlVVQzh4TGpBTkNraHZjM1E2SUdKdmJDNWlNREJ6ZEM1bGRRMEtEUW9BQkFnQUFBQnlaV05sYVhabEFBUURBQUFBS21FQUJBWUFBQUJqYkc5elpRQUFBQUFBQVFBQUFBQUFFQUFBQUVCdlltWjFjMk5oZEdWa0xteDFZUUFpQUFBQUN3QUFBQXNBQUFBTEFBQUFDd0FBQUFzQUFBQUxBQUFBQ3dBQUFBd0FBQUFNQUFBQURBQUFBQTBBQUFBTkFBQUFEUUFBQUEwQUFBQU9BQUFBRHdBQUFCQUFBQUFRQUFBQUVBQUFBQkVBQUFBUkFBQUFFUUFBQUJJQUFBQVNBQUFBRWdBQUFBMEFBQUFTQUFBQUVnQUFBQklBQUFBU0FBQUFFZ0FBQUJJQUFBQVNBQUFBRWdBQUFBVUFBQUFGQUFBQWMyVnNaZ0FBQUFBQUlnQUFBQUlBQUFCaEFBQUFBQUFpQUFBQUFnQUFBR0lBSGdBQUFDSUFBQUFDQUFBQVl3QWVBQUFBSWdBQUFBSUFBQUJrQUI0QUFBQWlBQUFBQVFBQUFBVUFBQUJmUlU1V0FBRUFBQUFCQUJBQUFBQkFiMkptZFhOallYUmxaQzVzZFdFQUNnQUFBQUVBQUFBQkFBQUFBUUFBQUFJQUFBQUtBQUFBQWdBQUFBc0FBQUFTQUFBQUN3QUFBQklBQUFBQUFBQUFBUUFBQUFVQUFBQmZSVTVXQUE9PSIpLCBuaWwsICJidCIsIF9FTlYpKSgpIEJvbEJvb3N0KCBTY3JpcHRLZXksIFNjcmlwdFZlcnNpb24gKQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQotLSBbR2FwQ2xvc2VyIGFuZCBJbnRlcnJ1cHQgU2V0dGluZ3NdIC0tDQoNCkdhcENsb3Nlckxpc3QgPSB7DQogICAgICAgCVsnQWhyaSddICAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdBaHJpVHVtYmxlJ30sDQogICAgICAgIFsnQWF0cm94J10gICAgICA9IHt0cnVlLCBzcGVsbCA9ICdBYXRyb3hRJ30sDQogICAgICAgIFsnQWthbGknXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdBa2FsaVNoYWRvd0RhbmNlJ30sIC0tIFRhcmdldGVkIGFiaWxpdHkNCiAgICAgICAgWydBbGlzdGFyJ10gICAgID0ge3RydWUsIHNwZWxsID0gJ0hlYWRidXR0J30sIC0tIFRhcmdldGVkIGFiaWxpdHkNCiAgICAgICAgWydDb3JraSddICAgICAJPSB7dHJ1ZSwgc3BlbGwgPSAnQ2FycGV0Qm9tYid9LA0KICAgICAgICBbJ0RpYW5hJ10gICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnRGlhbmFUZWxlcG9ydCd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnRWxpc2UnXSAgICAgCT0ge3RydWUsIHNwZWxsID0gJ0VsaXNlU3BpZGVyUUNhc3QnfSwgLS0gVGFyZ2V0ZWQgYWJpbGl0eQ0KICAgICAgICBbJ0Zpb3JhJ10gICAgIAk9IHt0cnVlLCBzcGVsbCA9ICdGaW9yYVEnfSwgLS0gVGFyZ2V0ZWQgYWJpbGl0eQ0KICAgICAgICBbJ0ZpenonXSAgICAgCT0ge3RydWUsIHNwZWxsID0gJ0ZpenpQaWVyY2luZ1N0cmlrZSd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnR25hciddCQk9IHt0cnVlLCBzcGVsbCA9ICdHbmFyRSd9LA0KICAgICAgICBbJ0dyYWdhcyddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnR3JhZ2FzRSd9LA0KICAgICAgICBbJ0dyYXZlcyddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnR3JhdmVzTW92ZSd9LA0KICAgICAgICBbJ0hlY2FyaW0nXSAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnSGVjYXJpbVVsdCd9LA0KICAgICAgICBbJ0lyZWxpYSddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnSXJlbGlhR2F0b3RzdSd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnSmFydmFuSVYnXSAgICA9IHt0cnVlLCBzcGVsbCA9ICdqYXJ2YW5BZGRpdGlvbid9LCAtLSBTa2lsbHNob3QvVGFyZ2V0ZWQgYWJpbGl0eQ0KICAgICAgICBbJ0pheCddICAgICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnSmF4TGVhcFN0cmlrZSd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnSmF5Y2UnXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdKYXljZVRvVGhlU2tpZXMnfSwgLS0gVGFyZ2V0ZWQgYWJpbGl0eQ0KICAgICAgICBbJ0thc3NhZGluJ10gICAgPSB7dHJ1ZSwgc3BlbGwgPSAnUmlmdFdhbGsnfSwNCiAgICAgICAgWydLaGF6aXgnXSAgICAgID0ge3RydWUsIHNwZWxsID0gJ0toYXppeFcnfSwNCiAgICAgICAgWydMZWJsYW5jJ10gICAgID0ge3RydWUsIHNwZWxsID0gJ0xlYmxhbmNTbGlkZSd9LA0KICAgICAgICBbJ0xlZVNpbiddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnYmxpbmRtb25rcXR3byd9LA0KICAgICAgICBbJ0xlb25hJ10gICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnTGVvbmFaZW5pdGhCbGFkZScsIHJhbmdlID0gOTAwLCAgICAgIHByb2pTcGVlZCA9IDIwMDB9LA0KICAgICAgICBbJ0x1Y2lhbiddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnTHVjaWFuRSd9LA0KICAgICAgICBbJ01hbHBoaXRlJ10gICAgPSB7dHJ1ZSwgc3BlbGwgPSAnVUZTbGFzaCd9LA0KICAgICAgICBbJ01hb2thaSddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnTWFva2FpVHJ1bmtMaW5lJyx9LCAtLSBUYXJnZXRlZCBhYmlsaXR5IA0KCQlbJ01hc3RlcllpJ10gIAk9IHt0cnVlLCBzcGVsbCA9ICdBbHBoYVN0cmlrZScsfSwgLS0gVGFyZ2V0ZWQgYWJpbGl0eQ0KICAgICAgICBbJ01vbmtleUtpbmcnXSAgPSB7dHJ1ZSwgc3BlbGwgPSAnTW9ua2V5S2luZ05pbWJ1cyd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnTmlkYWxlZSddICAgIAk9IHt0cnVlLCBzcGVsbCA9ICdQb3VuY2UnfSwNCiAgICAgICAgWydQYW50aGVvbiddICAgID0ge3RydWUsIHNwZWxsID0gJ1BhbnRoZW9uVyd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnUGFudGhlb24nXSAgICA9IHt0cnVlLCBzcGVsbCA9ICdQYW50aGVvblJKdW1wJ30sDQogICAgICAgIFsnUGFudGhlb24nXSAgICA9IHt0cnVlLCBzcGVsbCA9ICdQYW50aGVvblJGYWxsJ30sDQogICAgICAgIFsnUG9wcHknXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdQb3BweUhlcm9pY0NoYXJnZSd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAtLVsnUXVpbm4nXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdRdWlubkUnLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNzI1LCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIC0tIFRhcmdldGVkIGFiaWxpdHkNCiAgICAgIAlbJ1JhbW11cyddICAgIAk9IHt0cnVlLCBzcGVsbCA9ICdQb3dlckJhbGwnfSwNCiAgICAgICAgWydSZW5la3RvbiddICAgID0ge3RydWUsIHNwZWxsID0gJ1JlbmVrdG9uU2xpY2VBbmREaWNlJ30sDQogICAgICAgIFsnUml2ZW4nXSAgICAJPSB7dHJ1ZSwgc3BlbGwgPSAnUml2ZW5GZWludCd9LA0KICAgICAgICBbJ1NlanVhbmknXSAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnU2VqdWFuaUFyY3RpY0Fzc2F1bHQnfSwNCiAgICAgICAgWydTaHl2YW5hJ10gICAgID0ge3RydWUsIHNwZWxsID0gJ1NoeXZhbmFUcmFuc2Zvcm1DYXN0J30sDQogICAgICAgIFsnU2hlbiddICAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdTaGVuU2hhZG93RGFzaCd9LA0KICAgICAgICBbJ1RhbG9uJ10gICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnVGFsb25DdXR0aHJvYXQnfSwNCiAgICAgICAgWydUcmlzdGFuYSddICAgID0ge3RydWUsIHNwZWxsID0gJ1JvY2tldEp1bXAnfSwNCiAgICAgICAgWydUcnluZGFtZXJlJ10gID0ge3RydWUsIHNwZWxsID0gJ1NsYXNoJ30sDQogICAgICAgIFsnVmknXSAgCQk9IHt0cnVlLCBzcGVsbCA9ICdWaVEnfSwNCiAgICAgICAgWydYaW5aaGFvJ10gICAgID0ge3RydWUsIHNwZWxsID0gJ1hlblpoYW9Td2VlcCd9LCAtLSBUYXJnZXRlZCBhYmlsaXR5DQogICAgICAgIFsnWWFzdW8nXSAgICAgCT0ge3RydWUsIHNwZWxsID0gJ1lhc3VvRGFzaFdyYXBwZXInfSAtLSBUYXJnZXRlZCBhYmlsaXR5DQp9DQoNCkludGVycnVwdExpc3QgPSB7DQogICAgICAgICAgICAgICAgeyBjaGFyTmFtZSA9ICJLYXRhcmluYSIsICAgICAgICBzcGVsbE5hbWUgPSAiS2F0YXJpbmFSIiAsICAgICAgICAgICAgIG1lbnVOYW1lID0gIkthdGFyaW5hIChSKSIsICAgICAgICAJaW1wb3J0YW50ID0gMH0sDQogICAgICAgICAgICAgICAgeyBjaGFyTmFtZSA9ICJHYWxpbyIsICAgICAgICAgICBzcGVsbE5hbWUgPSAiR2FsaW9JZG9sT2ZEdXJhbmQiICwgICAgIG1lbnVOYW1lID0gIkdhbGlvIChSKSIsICAgICAgICAJCWltcG9ydGFudCA9IDB9LA0KICAgICAgICAgICAgICAgIHsgY2hhck5hbWUgPSAiRmlkZGxlU3RpY2tzIiwgICAgc3BlbGxOYW1lID0gIkNyb3dzdG9ybSIgLCAgICAgICAgICAgICBtZW51TmFtZSA9ICJGaWRkbGVzdGlja3MgKFIpIiwgICAgICAgIGltcG9ydGFudCA9IDF9LA0KICAgICAgICAgICAgICAgIHsgY2hhck5hbWUgPSAiRmlkZGxlU3RpY2tzIiwgICAgc3BlbGxOYW1lID0gIkRyYWluIiAsICAgICAgICAgICAgICAgICBtZW51TmFtZSA9ICJGaWRkbGVzdGlja3MgKFcpIiwgCQlpbXBvcnRhbnQgPSAxfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIk51bnUiLCAgICAgICAgICAgIHNwZWxsTmFtZSA9ICJBYnNvbHV0ZVplcm8iICwgICAgICAgICAgbWVudU5hbWUgPSAiTnVudSAoUikiLCAgICAgICAgCQlpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIlNoZW4iLCAgICAgICAgICAgIHNwZWxsTmFtZSA9ICJTaGVuU3RhbmRVbml0ZWQiICwgICAgICAgbWVudU5hbWUgPSAiU2hlbiAoUikiLCAgICAgICAgCQlpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIlVyZ290IiwgICAgICAgICAgIHNwZWxsTmFtZSA9ICJVcmdvdFN3YXAyIiAsICAgICAgICAgICAgbWVudU5hbWUgPSAiVXJnb3QgKFIpIiwgICAgICAgCQlpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIk1hbHphaGFyIiwgICAgICAgIHNwZWxsTmFtZSA9ICJBbFphaGFyTmV0aGVyR3Jhc3AiICwgICAgbWVudU5hbWUgPSAiTWFsemFoYXIgKFIpIiwgICAgICAgIAlpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIkthcnRodXMiLCAgICAgICAgIHNwZWxsTmFtZSA9ICJGYWxsZW5PbmUiICwgICAgICAgICAgICAgbWVudU5hbWUgPSAiS2FydGh1cyAoUikiLCAgICAgICAgCQlpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIlBhbnRoZW9uIiwgICAgICAgIHNwZWxsTmFtZSA9ICJQYW50aGVvblJKdW1wIiAsICAgICAgICAgbWVudU5hbWUgPSAiUGFudGhlb24gKFIgQ2FzdCkiLCAgICAgICBpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIlBhbnRoZW9uIiwgICAgICAgIHNwZWxsTmFtZSA9ICJQYW50aGVvblJGYWxsIiwgICAgICAgICAgbWVudU5hbWUgPSAiUGFudGhlb24gKFIgRmFsbCkiLCAgICAgICBpbXBvcnRhbnQgPSAwfSwNCiAgICAgICAgICAgICAgICB7IGNoYXJOYW1lID0gIlZhcnVzIiwgICAgICAgICAgIHNwZWxsTmFtZSA9ICJWYXJ1c1EiICwgICAgICAgICAgICAgICAgbWVudU5hbWUgPSAiVmFydXMgKFEpIiwgICAgICAgIAkJaW1wb3J0YW50ID0gMX0sDQogICAgICAgICAgICAgICAgeyBjaGFyTmFtZSA9ICJDYWl0bHluIiwgICAgICAgICBzcGVsbE5hbWUgPSAiQ2FpdGx5bkFjZWludGhlSG9sZSIgLCAgIG1lbnVOYW1lID0gIkNhaXRseW4gKFIpIiwgICAgICAgIAkJaW1wb3J0YW50ID0gMX0sDQogICAgICAgICAgICAgICAgeyBjaGFyTmFtZSA9ICJNaXNzRm9ydHVuZSIsICAgICBzcGVsbE5hbWUgPSAiTWlzc0ZvcnR1bmVCdWxsZXRUaW1lIiAsIG1lbnVOYW1lID0gIk1pc3MgRm9ydHVuZSAoUikiLCAgICAgCWltcG9ydGFudCA9IDF9LA0KICAgICAgICAgICAgICAgIHsgY2hhck5hbWUgPSAiVmVsa296IiwgICAgIAkJc3BlbGxOYW1lID0gIlZlbGtvelIiICwgICAgICAJCSAgbWVudU5hbWUgPSAiVmVsJ0tveiAoUikiLCAgIAkJCWltcG9ydGFudCA9IDF9LA0KICAgICAgICAgICAgICAgIHsgY2hhck5hbWUgPSAiV2Fyd2ljayIsICAgICAgICAgc3BlbGxOYW1lID0gIkluZmluaXRlRHVyZXNzIiAsICAgICAgICBtZW51TmFtZSA9ICJXYXJ3aWNrIChSKSIsICAgICAJCWltcG9ydGFudCA9IDB9DQp9DQoNCi0tIFtQcm9kaWN0aW9uIGFuZCBDb2xsaXNpb24gU3VwcG9ydF0NCg0KDQpsb2NhbCBmdW5jdGlvbiBnZXRIaXRCb3hSYWRpdXModGFyZ2V0KQ0KCXJldHVybiBHZXREaXN0YW5jZSh0YXJnZXQsIHRhcmdldC5taW5CQm94KQ0KZW5kDQoNCmxvY2FsIFByb2RpY3QNCmxvY2FsIFByb2RpY3RRDQpsb2NhbCBQcm9kaWN0UUNvbA0KDQotLSBbU2tpbiBDaGFuZ2VyIFRoaW5nXSAtLQ0KDQpsb2NhbCBMYXN0U2tpbiA9IDANCg0KLS0gW1NraWxsIEluZm9ybWF0aW9uXSAtLQ0KDQpsb2NhbCBSYW5nZXMgPSB7IEFBID0gNDUwIH0NCmxvY2FsIFNraWxscyA9IHsNCglTa2lsbFEgPSB7cmFuZ2UgPSAxMDUwLCBzcGVlZCA9IDE1MDAsIGRlbGF5ID0gMCwgd2lkdGggPSA5NSwgSGl0Q2hhbmNlID0gMn0sDQoJU2tpbGxXID0ge3JhbmdlID0gOTUwLCBzcGVlZCA9IG1hdGguaHVnZSwgZGVsYXkgPSAwLjUsIHdpZHRoID0gMjAwfSwNCglTa2lsbEUgPSB7cmFuZ2UgPSA1MDAsIHNwZWVkID0gbWF0aC5odWdlLCBkZWxheSA9IDAuMywgd2lkdGggPSA2MCwgSGl0Q2hhbmNlID0gMX0sDQoJU2tpbGxSID0ge3JhbmdlID0gNDAwLCBzcGVlZCA9IG1hdGguaHVnZSwgZGVsYXkgPSAwLjUsIHdpZHRoID0gNTB9DQp9DQoNCmxvY2FsIHRhcmdldE9iaiwgZnJpZW5kbHlPYmogPSBuaWwsIG5pbA0KDQotLSBbT25Mb2FkIFNlY3Rpb25dIC0tDQoNCmZ1bmN0aW9uIE9uTG9hZCgpDQoNCglVcGRhdGVXZWIodHJ1ZSwgU2NyaXB0TmFtZSwgaWQsIEhXSUQpDQoNCglNT0hDb25maWcgPSBzY3JpcHRDb25maWcoIkIxbmtUaHJlc2giLCAiTU9IVEhSRVNIIikNCg0KCU1PSENvbmZpZzphZGRTdWJNZW51KCJQcmVkaWN0aW9uIFNldHRpbmdzIiwgIlByZWRTZXR0aW5ncyIpDQoJTU9IQ29uZmlnLlByZWRTZXR0aW5nczphZGRQYXJhbSgiU2VsZWN0UHJlZGljdGlvbiIsICJTZWxlY3QgUHJlZGljdGlvbiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlByb2RpY3Rpb24iLCAiVlByZWRpY3Rpb24ifSkNCg0KCU1PSENvbmZpZzphZGRTdWJNZW51KCJLZXkgQmluZGluZ3MiLCAiS2V5QmluZGluZ3MiKQ0KCU1PSENvbmZpZy5LZXlCaW5kaW5nczphZGRQYXJhbSgiQ29tYm8iLCAiQ29tYm8iLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQoJTU9IQ29uZmlnLktleUJpbmRpbmdzOmFkZFBhcmFtKCJDYXN0USIsICJDYXN0IE9ubHkgUSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBHZXRLZXkoIkMiKSkNCglNT0hDb25maWcuS2V5QmluZGluZ3M6YWRkUGFyYW0oIkNhc3RMYW50ZXJuIiwgIlRocm93IExhbnRlcm4gVG8gQWxseSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBHZXRLZXkoIkciKSkNCglNT0hDb25maWcuS2V5QmluZGluZ3M6YWRkUGFyYW0oIlB1bGxFIiwgIlB1bGwgd2l0aCBUcmF5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIEdldEtleSgiWiIpKQ0KCU1PSENvbmZpZy5LZXlCaW5kaW5nczphZGRQYXJhbSgiUHVzaEUiLCAiUHVzaCB3aXRoIFRyYXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgR2V0S2V5KCJYIikpDQoNCglNT0hDb25maWc6YWRkU3ViTWVudSgiQ29tYm8gU2V0dGluZ3MiLCAiQ29tYm9TZXR0aW5ncyIpDQoJTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3M6YWRkU3ViTWVudSgiUSBTcGVjaWFsIFNldHRpbmdzIiwgIlFTcGVjaWFsIikNCglNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RU3BlY2lhbDphZGRQYXJhbSgiUVNsaWRlciIsICJTZXQgUSBSYW5nZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTA1MCwgNTAsIDExMDAsIDApDQoJLS1NT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RU3BlY2lhbDphZGRQYXJhbSgiQXV0b1FEYXNoIiwgIkF1dG8gUSBUYXJnZXQgRGFzaGluZyIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgdHJ1ZSwgR2V0S2V5KCJKIikpIC0tTk9UIFdPUktJTkcNCgktLU1PSENvbmZpZy5Db21ib1NldHRpbmdzLlFTcGVjaWFsOmFkZFBhcmFtKCJBdXRvUUltbW9iaWxlIiwgIkF1dG8gUSBUYXJnZXQgSW1tb2JpbGl6ZWQiLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIHRydWUsIEdldEtleSgiSyIpKSAtLU5PVCBXT1JLSU5HDQoJTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuUVNwZWNpYWw6YWRkUGFyYW0oIkRhc2hNb2RlIiwgIkRhc2ggRmVhdHVyZSIsIFNDUklQVF9QQVJBTV9MSVNULCAyLCB7Ik9uIERhc2giLCAiQWZ0ZXIgRGFzaCJ9KQ0KCU1PSENvbmZpZy5Db21ib1NldHRpbmdzLlFTcGVjaWFsOmFkZFBhcmFtKCJJbW1vYmlsZU1vZGUiLCAiSW1tb2JpbGUgRmVhdHVyZSIsIFNDUklQVF9QQVJBTV9MSVNULCAyLCB7Ik9uIEltbW9iaWxlIiwgIkFmdGVyIEltbW9iaWxlIn0pDQoJTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3M6YWRkUGFyYW0oIlVzZVEiLCAiVXNlIFEgaW4gJ0NvbWJvJyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuQ29tYm9TZXR0aW5nczphZGRQYXJhbSgiVXNlUTIiLCAiVXNlIFEyIGluICdDb21ibyciLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIHRydWUsIEdldEtleSgiVCIpKQ0KCU1PSENvbmZpZy5Db21ib1NldHRpbmdzOmFkZFBhcmFtKCJRTW9kZSIsICJVc2UgUSBNb2RlICIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlRhcmdldCBTZWxlY3RvciIsICJTZWxlY3RlZCBUYXJnZXQifSkNCglNT0hDb25maWcuQ29tYm9TZXR0aW5nczphZGRQYXJhbSgiVXNlVyIsICJVc2UgTGFudGVybiBpbiAnQ29tYm8nIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5Db21ib1NldHRpbmdzOmFkZFBhcmFtKCJUaHJvd0xhbnRlcm4iLCAiVGhyb3cgbGFudGVybiB0bzogIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHsiU2VsZWN0ZWQgQWxseSIsICJOZWFyZXN0IEFsbHkifSkNCglNT0hDb25maWcuQ29tYm9TZXR0aW5nczphZGRQYXJhbSgiVXNlRSIsICJVc2UgRSBpbiAnQ29tYm8nIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5Db21ib1NldHRpbmdzOmFkZFBhcmFtKCJFTW9kZSIsICJVc2UgRSBNb2RlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiUHVsbCIsICJQdXNoIn0pDQoJTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3M6YWRkUGFyYW0oIlVzZVIiLCAiVXNlIEJveCBpbiAnQ29tYm8nIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5Db21ib1NldHRpbmdzOmFkZFBhcmFtKCJVc2VSY291bnQiLCAiVXNlIEJveCBpZiBlbmVtaWVzIGluc2lkZToiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDUsIDApDQoNCglNT0hDb25maWc6YWRkU3ViTWVudSgiTGFudGVybiBTZXR0aW5ncyIsICJMYW50ZXJuU2V0dGluZ3MiKQ0KCU1PSENvbmZpZy5MYW50ZXJuU2V0dGluZ3M6YWRkUGFyYW0oIlNhdmVBbGx5IiwgIlNhdmUgYWxseSB3aXRoIGxhbnRlcm4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5nczphZGRQYXJhbSgiU2F2ZUFsbHlDb3VudCIsICJTYXZlIGFsbHkgaWYgZW5lbWllcyBuZWFyOiAiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDUsIDApDQoJTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5nczphZGRQYXJhbSgiQ0NBbGx5IiwgIkF1dG8gbGFudGVybiBDQ2VkIGFsbGllcyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpIC0tV09SS0lORyBCVVQgQlVHR1kNCg0KCU1PSENvbmZpZzphZGRTdWJNZW51KCJBdXRvIEJveCBTZXR0aW5ncyIsICJBQlNldHRpbmdzIikNCglNT0hDb25maWcuQUJTZXR0aW5nczphZGRQYXJhbSgiQXV0b0JveCIsICJBdXRvIEJveCBVc2FnZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuQUJTZXR0aW5nczphZGRQYXJhbSgiQXV0b0VuZW15UmFuZ2UiLCAiQXV0byBib3ggaWYgaW4gcmFuZ2U6ICIsIFNDUklQVF9QQVJBTV9TTElDRSwgMywgMSwgNSwgMCkNCg0KCU1PSENvbmZpZzphZGRTdWJNZW51KCJIaXRDaGFuY2UgU2V0dGluZ3MiLCAiSENTZXR0aW5ncyIpDQoJTU9IQ29uZmlnLkhDU2V0dGluZ3M6YWRkUGFyYW0oIkhpdENoYW5jZVEiLCAiQ2FzdCBRIGlmOiIsIFNDUklQVF9QQVJBTV9MSVNULCBTa2lsbHMuU2tpbGxRLkhpdENoYW5jZSwgeyJMb3cgSGl0Q2hhbmNlIiwgIkhpZ2ggSGl0Q2hhbmNlIn0pDQoJTU9IQ29uZmlnLkhDU2V0dGluZ3M6YWRkUGFyYW0oIkhpdENoYW5jZUUiLCAiQ2FzdCBFIGlmOiIsIFNDUklQVF9QQVJBTV9MSVNULCBTa2lsbHMuU2tpbGxFLkhpdENoYW5jZSwgeyJMb3cgSGl0Q2hhbmNlIiwgIkhpZ2ggSGl0Q2hhbmNlIn0pDQoNCglNT0hDb25maWc6YWRkU3ViTWVudSgiU3BlY2lhbCBTZXR0aW5ncyIsICJTUFNldHRpbmdzIikNCgktLU1PSENvbmZpZy5TUFNldHRpbmdzOmFkZFN1Yk1lbnUoIkdhcGNsb3NlciBTZXR0aW5ncyIsICJHQ1NldHRpbmdzIikNCglNT0hDb25maWcuU1BTZXR0aW5nczphZGRQYXJhbSgiR2FwQ2xvc2VyIiwgIlB1c2ggYXdheSBnYXAgY2xvc2VycyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgktLU1PSENvbmZpZy5TUFNldHRpbmdzLkdDU2V0dGluZ3M6YWRkUGFyYW0oIkdDTGlzdCIsIkdhcGNsb3NlciBsaXN0OiIsIDUsICIiKQ0KCQktLUxJU1QNCgktLU1PSENvbmZpZy5TUFNldHRpbmdzOmFkZFN1Yk1lbnUoIkludGVycnVwdCBTZXR0aW5ncyIsICJJTlRTZXR0aW5ncyIpDQoJTU9IQ29uZmlnLlNQU2V0dGluZ3M6YWRkUGFyYW0oIkludGVycnVwdCIsICJJbnRlcnJ1cHQgY2hhbm5lbGluZyBzcGVsbHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLlNQU2V0dGluZ3M6YWRkUGFyYW0oIkludGVycnVwdE1vZGUiLCAiSW50ZXJydXB0IHNwZWxscyB3aXRoOiIsIFNDUklQVF9QQVJBTV9MSVNULCAzLCB7Ik9ubHkgUSIsICJPbmx5IEUiLCAiQm90aCJ9KQ0KCS0tTU9IQ29uZmlnLlNQU2V0dGluZ3MuSU5UU2V0dGluZ3M6YWRkUGFyYW0oIklOVExpc3QiLCJJbnRlcnJ1cHQgbGlzdDoiLCA1LCAiIikNCgktLWZvciBpLCBpbnRlcnJ1cHQgaW4gaXBhaXJzKEludGVycnVwdExpc3QpIGRvDQoJLS0JTU9IQ29uZmlnLlNQU2V0dGluZ3MuSU5UU2V0dGluZ3M6YWRkUGFyYW0oaW50ZXJydXB0LnNwZWxsTmFtZSwgaW50ZXJydXB0Lm1lbnVOYW1lLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJLS1lbmQNCg0KDQoJTU9IQ29uZmlnOmFkZFN1Yk1lbnUoIlNraW4gQ2hhbmdlciIsICJTa2luQ2hhbmdlciIpDQoJTU9IQ29uZmlnLlNraW5DaGFuZ2VyOmFkZFBhcmFtKCJza2luIiwgIlVzZSBjdXN0b20gc2tpbiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJTU9IQ29uZmlnLlNraW5DaGFuZ2VyOmFkZFBhcmFtKCJza2luMSIsICJTa2luIGNoYW5nZXIiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEsIDEsIDMpDQoNCglNT0hDb25maWc6YWRkU3ViTWVudSgiRHJhdyBTZXR0aW5ncyIsICJEcmF3U2V0dGluZ3MiKQ0KCU1PSENvbmZpZy5EcmF3U2V0dGluZ3M6YWRkUGFyYW0oIkRyYXdRIiwgIkRyYXcgUSBSYW5nZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuRHJhd1NldHRpbmdzOmFkZFBhcmFtKCJEcmF3TGluZSIsICJEcmF3IEhvb2sgTGluZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuRHJhd1NldHRpbmdzOmFkZFBhcmFtKCJEcmF3VGV4dCIsICJEcmF3IFNlbGVjdGVkIFRleHQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLkRyYXdTZXR0aW5nczphZGRQYXJhbSgiRHJhd1RhcmdldCIsICJEcmF3IFNlbGVjdGVkIFRhcmdldCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuRHJhd1NldHRpbmdzOmFkZFBhcmFtKCJEcmF3QWxseSIsICJEcmF3IFNlbGVjdGVkIEFsbHkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoNCglNT0hDb25maWc6YWRkU3ViTWVudSgiUGVybWFzaG93IFNldHRpbmdzIiwgIlBTU2V0dGluZ3MiKQ0KCU1PSENvbmZpZy5QU1NldHRpbmdzOmFkZFBhcmFtKCJwZXJtYXNob3ciLCAiRW5hYmxlL0Rpc2FibGUgQUxMIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5QU1NldHRpbmdzOmFkZFBhcmFtKCJwZXJtYXNob3cxIiwgIkNvbWJvIChQZXJtYXNob3cpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5QU1NldHRpbmdzOmFkZFBhcmFtKCJwZXJtYXNob3cyIiwgIlEyIFVzYWdlIChQZXJtYXNob3cpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5QU1NldHRpbmdzOmFkZFBhcmFtKCJwZXJtYXNob3czIiwgIkxhbnRlcm4gVXNhZ2UgKFBlcm1hc2hvdykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLlBTU2V0dGluZ3M6YWRkUGFyYW0oInBlcm1hc2hvdzQiLCAiVWx0aW1hdGUgaW4gQ29tYm8gKFBlcm1hc2hvdykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLlBTU2V0dGluZ3M6YWRkUGFyYW0oInBlcm1hc2hvdzUiLCAiVWx0aW1hdGUgRW5lbXkgQ291bnQgKFBlcm1hc2hvdykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLlBTU2V0dGluZ3M6YWRkUGFyYW0oInBlcm1hc2hvdzYiLCAiU2F2ZSBBbGx5IChQZXJtYXNob3cpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5QU1NldHRpbmdzOmFkZFBhcmFtKCJwZXJtYXNob3c3IiwgIlNhdmUgQWxseSBDb3VudCAoUGVybWFzaG93KSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuUFNTZXR0aW5nczphZGRQYXJhbSgicGVybWFzaG93OCIsICJDQyBBbGx5IChQZXJtYXNob3cpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCU1PSENvbmZpZy5QU1NldHRpbmdzOmFkZFBhcmFtKCJwZXJtYXNob3c5IiwgIkF1dG9ib3ggVXNhZ2UgKFBlcm1hc2hvdykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLlBTU2V0dGluZ3M6YWRkUGFyYW0oInBlcm1hc2hvdzEwIiwgIkF1dG9ib3ggRW5lbXkgQ291bnQgKFBlcm1hc2hvdykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJTU9IQ29uZmlnLlBTU2V0dGluZ3M6YWRkUGFyYW0oInBlcm1hc2hvdzExIiwgIkdhcGNsb3NlciBVc2FnZSAoUGVybWFzaG93KSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuUFNTZXR0aW5nczphZGRQYXJhbSgicGVybWFzaG93MTIiLCAiSW50ZXJydXB0IFNwZWxscyBVc2FnZSAoUGVybWFzaG93KSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCglNT0hDb25maWcuUFNTZXR0aW5nczphZGRQYXJhbSgiV2FybmluZ1NwYWNlIiwgIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iLCA1LCAiIikNCglNT0hDb25maWcuUFNTZXR0aW5nczphZGRQYXJhbSgiV2FybmluZyIsICJXYXJuaW5nOiBBbGwgY2hhbmdlcyByZXF1aXJlcyAnUmVsb2FkJyIsIDUsICIiKQ0KDQoNCglNT0hDb25maWc6YWRkUGFyYW0oIlNwYWNlIiwiIiwgNSwgIiIpDQoJTU9IQ29uZmlnOmFkZFBhcmFtKCJBdXRob3IiLCJBdXRob3I6IEIxbmsiLCA1LCAiIikNCglNT0hDb25maWc6YWRkUGFyYW0oIlZlcnNpb24iLCJWZXJzaW9uOiAiLi52ZXJzaW9uLi4iIiwgNSwgIiIpDQoNCgktLSBQcm9kaWN0aW9uIENhbGxCYWNrcyAtLQ0KIAlpZiBNT0hDb25maWcuUHJlZFNldHRpbmdzLlNlbGVjdFByZWRpY3Rpb24gPT0gMSB0aGVuDQoNCgkJUHJvZGljdCA9IFByb2RpY3RNYW5hZ2VyLkdldEluc3RhbmNlKCkNCgkJUHJvZGljdFEgPSBQcm9kaWN0OkFkZFByb2RpY3Rpb25PYmplY3QoX1EsIFNraWxscy5Ta2lsbFEucmFuZ2UsIFNraWxscy5Ta2lsbFEuc3BlZWQsIFNraWxscy5Ta2lsbFEuZGVsYXksIFNraWxscy5Ta2lsbFEud2lkdGgpDQoJCVByb2RpY3RRQ29sID0gQ29sbGlzaW9uKFNraWxscy5Ta2lsbFEucmFuZ2UsIFNraWxscy5Ta2lsbFEuc3BlZWQsIFNraWxscy5Ta2lsbFEuZGVsYXksIFNraWxscy5Ta2lsbFEud2lkdGgpDQoJCVFQb3MgPSBuaWwNCg0KCQkJZm9yIGkgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQgZG8NCgkJCQlsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KCQkJCWlmIGhlcm8udGVhbSB+PSBteUhlcm8udGVhbSB0aGVuDQoJCQkJCVByb2RpY3RROkdldFByZWRpY3Rpb25PbkRhc2goaGVybywgT25EYXNoRnVuYykNCgkJCQkJUHJvZGljdFE6R2V0UHJlZGljdGlvbkFmdGVyRGFzaChoZXJvLCBBZnRlckRhc2hGdW5jKQ0KCQkJCQlQcm9kaWN0UTpHZXRQcmVkaWN0aW9uQWZ0ZXJJbW1vYmlsZShoZXJvLCBBZnRlckltbW9iaWxlRnVuYykNCgkJCQkJUHJvZGljdFE6R2V0UHJlZGljdGlvbk9uSW1tb2JpbGUoaGVybywgT25JbW1vYmlsZUZ1bmMpDQoJCQkJZW5kDQoJCQllbmQNCgllbmQNCg0KCS0tIFNraW4gQ2hhbmdlciBQYXJ0IC0tDQoJaWYgTU9IQ29uZmlnLlNraW5DaGFuZ2VyLnNraW4gdGhlbg0KCQlHZW5Nb2RlbFBhY2tldCgiVGhyZXNoIiwgTU9IQ29uZmlnLlNraW5DaGFuZ2VyLnNraW4xKQ0KCQlMYXN0U2tpbiA9IE1PSENvbmZpZy5Ta2luQ2hhbmdlci5za2luMQ0KCWVuZA0KDQoJLS0gVGFyZ2V0IFNlbGVjdG9yIFBhcnQgLS0NCgl0cyA9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9ORUFSX01PVVNFLCAxMjAwLCBEQU1BR0VfUEhZU0lDQUwpDQoJdHMubmFtZSA9ICJUaHJlc2giDQoJTU9IQ29uZmlnOmFkZFRTKHRzKQ0KCXRhcmdldCA9IHRzLnRhcmdldA0KCQ0KCS0tIFZQcmVkaWN0aW9uIFBhcnQgLS0NCglWUCA9IFZQcmVkaWN0aW9uKCkNCgkNCgktLSBPcmJ3YWxrZXIgUGFydCAtLQ0KCU9yYndhbGtlciA9IFNPVyhWUCkNCglNT0hDb25maWc6YWRkU3ViTWVudSgiT3Jid2Fsa2VyIiwgIlNPV29yYiIpDQoJT3Jid2Fsa2VyOkxvYWRUb01lbnUoTU9IQ29uZmlnLlNPV29yYikNCgkNCgktLSBQZXJtYXNob3cgUGFydCAtLQ0KCWlmIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdyBhbmQgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93MSB0aGVuIE1PSENvbmZpZy5LZXlCaW5kaW5nczpwZXJtYVNob3coIkNvbWJvIikgZW5kDQoJaWYgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93IGFuZCBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3cyIHRoZW4gTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3M6cGVybWFTaG93KCJVc2VRMiIpIGVuZA0KCWlmIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdyBhbmQgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93MyB0aGVuIE1PSENvbmZpZy5Db21ib1NldHRpbmdzOnBlcm1hU2hvdygiVXNlVyIpIGVuZA0KCWlmIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdyBhbmQgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93NCB0aGVuIE1PSENvbmZpZy5Db21ib1NldHRpbmdzOnBlcm1hU2hvdygiVXNlUiIpIGVuZA0KCWlmIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdyBhbmQgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93NSB0aGVuIE1PSENvbmZpZy5Db21ib1NldHRpbmdzOnBlcm1hU2hvdygiVXNlUmNvdW50IikgZW5kDQoJaWYgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93IGFuZCBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3c2IHRoZW4gTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5nczpwZXJtYVNob3coIlNhdmVBbGx5IikgZW5kDQoJaWYgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93IGFuZCBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3c3IHRoZW4gTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5nczpwZXJtYVNob3coIlNhdmVBbGx5Q291bnQiKSBlbmQNCglpZiBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3cgYW5kIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdzggdGhlbiBNT0hDb25maWcuTGFudGVyblNldHRpbmdzOnBlcm1hU2hvdygiQ0NBbGx5IikgZW5kDQoJaWYgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93IGFuZCBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3c5IHRoZW4gTU9IQ29uZmlnLkFCU2V0dGluZ3M6cGVybWFTaG93KCJBdXRvQm94IikgZW5kDQoJaWYgTU9IQ29uZmlnLlBTU2V0dGluZ3MucGVybWFzaG93IGFuZCBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3cxMCB0aGVuIE1PSENvbmZpZy5BQlNldHRpbmdzOnBlcm1hU2hvdygiQXV0b0VuZW15UmFuZ2UiKSBlbmQNCglpZiBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3cgYW5kIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdzExIHRoZW4gTU9IQ29uZmlnLlNQU2V0dGluZ3M6cGVybWFTaG93KCJHYXBDbG9zZXIiKSBlbmQNCglpZiBNT0hDb25maWcuUFNTZXR0aW5ncy5wZXJtYXNob3cgYW5kIE1PSENvbmZpZy5QU1NldHRpbmdzLnBlcm1hc2hvdzEyIHRoZW4gTU9IQ29uZmlnLlNQU2V0dGluZ3M6cGVybWFTaG93KCJJbnRlcnJ1cHQiKSBlbmQNCg0KCVByaW50Q2hhdCgiPGZvbnQgY29sb3IgPSBcIiNGRkZGRkZcIj5bVGhyZXNoXSA8L2ZvbnQ+PGZvbnQgY29sb3IgPSBcIiNGRjAwMDBcIj5NYXN0ZXIgb2YgSG9vayBieSA8L2ZvbnQ+PGZvbnQgY29sb3IgPSBcIiNGRkZGRkZcIj5TaWxlbnRTdGFyPC9mb250PiIpDQoJUHJpbnRDaGF0KCI8Zm9udCBjb2xvciA9IFwiI0ZGRkZGRlwiPltUaHJlc2hdIDwvZm9udD48Zm9udCBjb2xvciA9IFwiI0ZGMDAwMFwiPlZlcnNpb246IDwvZm9udD48Zm9udCBjb2xvciA9IFwiI0ZGRkZGRlwiPiIuLnZlcnNpb24uLiI8L2ZvbnQ+IDwvZm9udD4iKQ0KCVByaW50Q2hhdCgiPGZvbnQgY29sb3IgPSBcIiNGRkZGRkZcIj5bVGhyZXNoXSA8L2ZvbnQ+PGZvbnQgY29sb3IgPSBcIiNGRjAwMDBcIj5TdWNjZXNzZnVsbHkgbG9hZGVkLjwvZm9udD4gPC9mb250PiIpDQoNCmVuZA0KDQotLSBJbnRlcnJ1cHQgdmUgR2FwQ2xvc2VyIGVrbGUuDQoNCmZ1bmN0aW9uIE9uVGljaygpDQoJQ0RIYW5kbGVyKCkNCgl0czp1cGRhdGUoKQ0KCU9yYndhbGtlcjpFbmFibGVBdHRhY2tzKCkNCglUYXJnZXQgPSB0cy50YXJnZXQNCg0KCVNraWxscy5Ta2lsbFEucmFuZ2UgPSBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RU3BlY2lhbC5RU2xpZGVyDQoNCglpZiBNT0hDb25maWcuQUJTZXR0aW5ncy5BdXRvQm94IHRoZW4NCgkJQ2hlY2tFbmVteUluUmFuZ2UoKQ0KCWVuZA0KDQoJaWYgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuVGhyb3dMYW50ZXJuID09IDEgdGhlbg0KCQlsb2NhbCB0YXJnZXQgPSBHZXRUYXJnZXQoKQ0KCQlpZiB0YXJnZXQgfj0gbmlsIHRoZW4NCgkJCWlmIHN0cmluZy5maW5kKHRhcmdldC50eXBlLCAiSGVybyIpIGFuZCB0YXJnZXQudGVhbSA9PSBteUhlcm8udGVhbSB0aGVuDQoJCQkJZnJpZW5kbHlPYmogPSB0YXJnZXQNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlFNb2RlID09IDIgdGhlbg0KCQlsb2NhbCB0YXJnZXQgPSBHZXRUYXJnZXQoKQ0KCQlpZiB0YXJnZXQgfj0gbmlsIHRoZW4NCgkJCWlmIHN0cmluZy5maW5kKHRhcmdldC50eXBlLCAiSGVybyIpIGFuZCB0YXJnZXQudGVhbSB+PSBteUhlcm8udGVhbSB0aGVuDQoJCQkJdGFyZ2V0T2JqID0gdGFyZ2V0DQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCgkNCgktLSBMYW50ZXJuIEZlYXR1cmVzIC0tDQoNCglTYXZlQWxseSgpDQoJQ0NBbGx5KCkNCg0KCS0tIFNwZWxscyAoUmVhZHkgb3Igbm90KSAtLQ0KDQoJUVJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkpDQoJV1JFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkpDQoJRVJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkpDQoJUlJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkpDQoJUmFuZ2VzLkFBID0gbXlIZXJvLnJhbmdlDQoNCglTa2lsbHMuU2tpbGxRLm5hbWUgPSBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lDQoJU2tpbGxzLlNraWxsVy5uYW1lID0gbXlIZXJvOkdldFNwZWxsRGF0YShfVykubmFtZQ0KCVNraWxscy5Ta2lsbEUubmFtZSA9IG15SGVybzpHZXRTcGVsbERhdGEoX0UpLm5hbWUNCglTa2lsbHMuU2tpbGxSLm5hbWUgPSBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lDQoNCiBpZiBNT0hDb25maWcuUHJlZFNldHRpbmdzLlNlbGVjdFByZWRpY3Rpb24gPT0gMSB0aGVuDQoJCWlmIFZhbGlkVGFyZ2V0KFRhcmdldCkgdGhlbg0KICAgICAgICAJUHJvZGljdFE6R2V0UHJlZGljdGlvbkNhbGxCYWNrKFRhcmdldCwgR2V0UVBvcykNCiAgICAJZWxzZQ0KICAgICAgICAJUVBvcyA9IG5pbA0KICAgIAllbmQNCg0KICAgIGZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQogICAgICAgIGxvY2FsIGhlcm8gPSBoZXJvTWFuYWdlcjpHZXRIZXJvKGkpDQogICAgICAgIGlmIGhlcm8udGVhbSB+PSBteUhlcm8udGVhbSB0aGVuDQogICAgICAgICAgICBpZiBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RU3BlY2lhbC5EYXNoRmVhdHVyZSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICBQcm9kaWN0UTpHZXRQcmVkaWN0aW9uT25EYXNoKGhlcm8sIE9uRGFzaEZ1bmMpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgUHJvZGljdFE6R2V0UHJlZGljdGlvbk9uRGFzaChoZXJvLCBPbkRhc2hGdW5jLCBmYWxzZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RU3BlY2lhbC5EYXNoRmVhdHVyZSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBQcm9kaWN0UTpHZXRQcmVkaWN0aW9uQWZ0ZXJEYXNoKGhlcm8sIEFmdGVyRGFzaEZ1bmMpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgUHJvZGljdFE6R2V0UHJlZGljdGlvbkFmdGVyRGFzaChoZXJvLCBBZnRlckRhc2hGdW5jLCBmYWxzZSkNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBpZiBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RU3BlY2lhbC5JbW1vYmlsZUZlYXR1cmUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgUHJvZGljdFE6R2V0UHJlZGljdGlvbk9uSW1tb2JpbGUoaGVybywgT25JbW1vYmlsZUZ1bmMpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgUHJvZGljdFE6R2V0UHJlZGljdGlvbk9uSW1tb2JpbGUoaGVybywgT25JbW1vYmlsZUZ1bmMsIGZhbHNlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlFTcGVjaWFsLkltbW9iaWxlRmVhdHVyZSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBQcm9kaWN0UTpHZXRQcmVkaWN0aW9uQWZ0ZXJJbW1vYmlsZShoZXJvLCBBZnRlckltbW9iaWxlRnVuYykNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBQcm9kaWN0UTpHZXRQcmVkaWN0aW9uQWZ0ZXJJbW1vYmlsZShoZXJvLCBBZnRlckltbW9iaWxlRnVuYywgZmFsc2UpDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBPbkRhc2hQb3MgPSBuaWwNCiAgICBBZnRlckRhc2hQb3MgPSBuaWwNCiAgICBBZnRlckltbW9iaWxlUG9zID0gbmlsDQogICAgT25JbW1vYmlsZVBvcyA9IG5pbA0KIGVuZA0KDQoJLS1pZiAoTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuUVNwZWNpYWwuU2VsZWN0aW9uVHlwZSA9PSAyIG9yIDEpIG9yIChNT0hDb25maWcuTGFudGVyblNldHRpbmdzLlRocm93TGFudGVybiA9PSAzIG9yIDIgb3IgMSkgdGhlbg0KCS0tCXRhcmdldCA9IEdldFRhcmdldCgpDQoJLS1lbHNlDQoJLS0JdGFyZ2V0ID0gdHMudGFyZ2V0DQoJLS1lbmQNCg0KCWlmIG15SGVyby5kZWFkIHRoZW4NCgkJcmV0dXJuDQoJZW5kDQoNCglpZiBNT0hDb25maWcuS2V5QmluZGluZ3MuQ29tYm8gdGhlbg0KCQkNCgkJaWYgRVJFQURZIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5Vc2VFIGFuZCBWYWxpZFRhcmdldChUYXJnZXQpIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5FTW9kZSA9PSAxIHRoZW4NCgkJCUNhc3RFKFRhcmdldCkNCgkJZWxzZWlmIEVSRUFEWSBhbmQgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuVXNlRSBhbmQgVmFsaWRUYXJnZXQoVGFyZ2V0KSBhbmQgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuRU1vZGUgPT0gMiB0aGVuDQoJCQlDYXN0RTIoVGFyZ2V0KQ0KCQllbmQNCg0KCQlpZiBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5Vc2VSIHRoZW4NCgkJCWlmIFJSRUFEWSBhbmQgQXJlYUVuZW15Q291bnQobXlIZXJvLCA1NTApID49IE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlVzZVJjb3VudCB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9SKQ0KCQkJZW5kDQoJCWVuZA0KDQoJCWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlVzZVcgYW5kIFdSRUFEWSB0aGVuDQoJCQlpZiBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5UaHJvd0xhbnRlcm4gPT0gMSB0aGVuDQoJCQkJQ2FzdFcodGFyZ2V0KQ0KCQkJZWxzZWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlRocm93TGFudGVybiA9PSAyIHRoZW4NCgkJCQlDYXN0VzIodGFyZ2V0KQ0KCQkJLS1lbHNlaWYgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuVGhyb3dMYW50ZXJuID09IDMgdGhlbg0KCQkJCS0tQ2FzdFczKHRhcmdldCkNCgkJCWVuZA0KCQllbmQNCg0KCQlpZiBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5Vc2VRIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RTW9kZSA9PSAxIHRoZW4NCgkJCWlmIFFSRUFEWSBhbmQgVmFsaWRUYXJnZXQoVGFyZ2V0KSBhbmQgTU9IQ29uZmlnLlByZWRTZXR0aW5ncy5TZWxlY3RQcmVkaWN0aW9uID09IDEgdGhlbg0KCQkJCVByb2RpY3RROkdldFByZWRpY3Rpb25DYWxsQmFjayhUYXJnZXQsIENhc3RRKQ0KCQkJZWxzZWlmIFFSRUFEWSBhbmQgTU9IQ29uZmlnLlByZWRTZXR0aW5ncy5TZWxlY3RQcmVkaWN0aW9uID09IDIgdGhlbg0KCQkJCVZQQ2FzdFEodGFyZ2V0KQ0KCQkJZW5kDQoNCgkJCWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlVzZVEyIHRoZW4NCgkJCQlDYXN0UTIoKQ0KCQkJZW5kDQoJCWVuZA0KDQoJCWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlVzZVEgYW5kIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlFNb2RlID09IDIgdGhlbg0KCQkJaWYgUVJFQURZIGFuZCBWYWxpZFRhcmdldCh0YXJnZXRPYmopIGFuZCBNT0hDb25maWcuUHJlZFNldHRpbmdzLlNlbGVjdFByZWRpY3Rpb24gPT0gMSB0aGVuDQoJCQkJUHJvZGljdFE6R2V0UHJlZGljdGlvbkNhbGxCYWNrKHRhcmdldE9iaiwgQ2FzdFEpDQoJCQllbHNlaWYgUVJFQURZIGFuZCBNT0hDb25maWcuUHJlZFNldHRpbmdzLlNlbGVjdFByZWRpY3Rpb24gPT0gMiB0aGVuDQoJCQkJVlBDYXN0UTIodGFyZ2V0KQ0KCQkJZW5kDQoNCgkJCWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlVzZVEyIHRoZW4NCgkJCQlDYXN0UTIoKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJaWYgTU9IQ29uZmlnLktleUJpbmRpbmdzLlB1c2hFIHRoZW4NCgkJaWYgRVJFQURZIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5Vc2VFIGFuZCBWYWxpZFRhcmdldChUYXJnZXQpIHRoZW4NCgkJCUNhc3RFMihUYXJnZXQpDQoJCWVuZA0KCWVuZA0KDQoJaWYgTU9IQ29uZmlnLktleUJpbmRpbmdzLlB1bGxFIHRoZW4NCgkJaWYgRVJFQURZIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5Vc2VFIGFuZCBWYWxpZFRhcmdldChUYXJnZXQpIHRoZW4NCgkJCUNhc3RFKFRhcmdldCkNCgkJZW5kDQoJZW5kDQoNCglpZiBNT0hDb25maWcuS2V5QmluZGluZ3MuQ2FzdFEgYW5kIE1PSENvbmZpZy5QcmVkU2V0dGluZ3MuU2VsZWN0UHJlZGljdGlvbiA9PSAxIHRoZW4NCgkJUHJvZGljdFE6R2V0UHJlZGljdGlvbkNhbGxCYWNrKFRhcmdldCwgQ2FzdFEpDQoJZWxzZWlmIE1PSENvbmZpZy5LZXlCaW5kaW5ncy5DYXN0USBhbmQgTU9IQ29uZmlnLlByZWRTZXR0aW5ncy5TZWxlY3RQcmVkaWN0aW9uID09IDIgdGhlbg0KCQlWUENhc3RRKHRhcmdldCkNCgllbmQNCg0KCWlmIE1PSENvbmZpZy5LZXlCaW5kaW5ncy5DYXN0TGFudGVybiB0aGVuDQoJCW15SGVybzpNb3ZlVG8obW91c2VQb3MueCwgbW91c2VQb3MueikNCgkJQ2FzdExhbnRlcm4odGFyZ2V0KQ0KCWVuZA0KDQoJaWYgTU9IQ29uZmlnLlNraW5DaGFuZ2VyLnNraW4gYW5kIFNraW5DaGFuZ2VkKCkgdGhlbg0KCQlHZW5Nb2RlbFBhY2tldCgiVGhyZXNoIiwgTU9IQ29uZmlnLlNraW5DaGFuZ2VyLnNraW4xKQ0KCQlMYXN0U2tpbiA9IE1PSENvbmZpZy5Ta2luQ2hhbmdlci5za2luMQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uRHJhdygpDQoJaWYgTU9IQ29uZmlnLkRyYXdTZXR0aW5ncy5EcmF3USBhbmQgUVJFQURZIGFuZCBub3QgbXlIZXJvLmRlYWQgdGhlbg0KCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxscy5Ta2lsbFEucmFuZ2UsIDB4RkYwMDgwMDApDQoJZWxzZWlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd1EgYW5kIG5vdCBRUkVBRFkgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQoJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgU2tpbGxzLlNraWxsUS5yYW5nZSwgMHhGRkZGMDAwMCkNCgllbmQNCg0KCWxvY2FsIHZhbGlkVGFyZ2V0cyA9IDANCglpZiBNT0hDb25maWcuRHJhd1NldHRpbmdzLkRyYXdUYXJnZXQgYW5kIHRhcmdldE9iaiB+PSBuaWwgYW5kIHRhcmdldE9iai52YWxpZCBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0T2JqKSBhbmQgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuUU1vZGUgPT0gMiB0aGVuDQoJCURyYXdDaXJjbGUodGFyZ2V0T2JqLngsIHRhcmdldE9iai55LCB0YXJnZXRPYmoueiwgMTAwLCAweDAwQ0MwMCkNCgkJCWlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd1RleHQgdGhlbg0KCQkJCURyYXdUZXh0KCJTZWxlY3RlZCBUYXJnZXQ6ICIgLi50YXJnZXRPYmouY2hhck5hbWUsIDE4LCAxMDAsIDE1MCwgMHhGRkZGRkYwMCkNCgkJCWVuZA0KCQl2YWxpZFRhcmdldHMgPSB2YWxpZFRhcmdldHMgKyAxDQoJZW5kDQogICAgICAgICAgICAgICAgICAgICAgIA0KCWlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd0FsbHkgYW5kIGZyaWVuZGx5T2JqIH49IG5pbCBhbmQgZnJpZW5kbHlPYmoudmFsaWQgYW5kIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlRocm93TGFudGVybiA9PSAxIHRoZW4NCgkJRHJhd0NpcmNsZShmcmllbmRseU9iai54LCBmcmllbmRseU9iai55LCBmcmllbmRseU9iai56LCAxMDAsIDB4MDBDQzAwKQ0KCQkJaWYgTU9IQ29uZmlnLkRyYXdTZXR0aW5ncy5EcmF3VGV4dCB0aGVuDQoJCQkJRHJhd1RleHQoIlNlbGVjdGVkIEFsbHk6ICIgLi5mcmllbmRseU9iai5jaGFyTmFtZSwgMTgsIDEwMCwgMTAwLCAweEZGRkZGRjAwKQ0KCQkJZW5kDQoJCXZhbGlkVGFyZ2V0cyA9IHZhbGlkVGFyZ2V0cyArIDENCgllbmQNCg0KCWlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd0xpbmUgYW5kIFZhbGlkVGFyZ2V0KFRhcmdldCwgU2tpbGxzLlNraWxsUS5yYW5nZSkgYW5kIFFSRUFEWSBhbmQgbm90IG15SGVyby5kZWFkIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RTW9kZSA9PSAxIHRoZW4NCgkJbG9jYWwgRW5lbXlQb3NpdGlvbiA9IFRhcmdldA0KCQlpZiBFbmVteVBvc2l0aW9uIH49IG5pbCB0aGVuDQoJCQlEcmF3TGluZTNER3JlZW4obXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgRW5lbXlQb3NpdGlvbi54LCBFbmVteVBvc2l0aW9uLnksIEVuZW15UG9zaXRpb24ueiwgMykNCgkJZW5kDQoJZWxzZWlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd0xpbmUgYW5kIFZhbGlkVGFyZ2V0KFRhcmdldCwgU2tpbGxzLlNraWxsUS5yYW5nZSkgYW5kIG5vdCBRUkVBRFkgYW5kIG5vdCBteUhlcm8uZGVhZCBhbmQgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuUU1vZGUgPT0gMSB0aGVuDQoJCWxvY2FsIEVuZW15UG9zaXRpb24gPSBUYXJnZXQNCgkJaWYgRW5lbXlQb3NpdGlvbiB+PSBuaWwgdGhlbg0KCQkJRHJhd0xpbmUzRFJlZChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCBFbmVteVBvc2l0aW9uLngsIEVuZW15UG9zaXRpb24ueSwgRW5lbXlQb3NpdGlvbi56LCAzKQ0KCQllbmQNCiAgICBlbmQNCg0KICAgIGlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd0xpbmUgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldE9iaiwgU2tpbGxzLlNraWxsUS5yYW5nZSkgYW5kIFFSRUFEWSBhbmQgbm90IG15SGVyby5kZWFkIGFuZCBNT0hDb25maWcuQ29tYm9TZXR0aW5ncy5RTW9kZSA9PSAyIHRoZW4NCgkJaWYgdGFyZ2V0T2JqIH49IG5pbCB0aGVuDQoJCQlEcmF3TGluZTNER3JlZW4obXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgdGFyZ2V0T2JqLngsIHRhcmdldE9iai55LCB0YXJnZXRPYmoueiwgMykNCgkJZW5kDQoJZWxzZWlmIE1PSENvbmZpZy5EcmF3U2V0dGluZ3MuRHJhd0xpbmUgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldE9iaiwgU2tpbGxzLlNraWxsUS5yYW5nZSkgYW5kIG5vdCBRUkVBRFkgYW5kIG5vdCBteUhlcm8uZGVhZCBhbmQgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuUU1vZGUgPT0gMiB0aGVuDQoJCWlmIHRhcmdldE9iaiB+PSBuaWwgdGhlbg0KCQkJRHJhd0xpbmUzRFJlZChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCB0YXJnZXRPYmoueCwgdGFyZ2V0T2JqLnksIHRhcmdldE9iai56LCAzKQ0KCQllbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBEcmF3TGluZTNER3JlZW4oeDEsIHkxLCB6MSwgeDIsIHkyLCB6Miwgd2lkdGgsIGNvbG9yKQ0KICAgIGxvY2FsIHAgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHgxLCB5MSwgejEpKQ0KCWxvY2FsIHB4LCBweSA9IHAueCwgcC55DQoJbG9jYWwgYyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoeDIsIHkyLCB6MikpDQoJbG9jYWwgY3gsIGN5ID0gYy54LCBjLnkNCgkJCURyYXdMaW5lKGN4LCBjeSwgcHgsIHB5LCAzLCAweEZGMDBGRjAwKQ0KZW5kDQoNCmZ1bmN0aW9uIERyYXdMaW5lM0RSZWQoeDEsIHkxLCB6MSwgeDIsIHkyLCB6Miwgd2lkdGgsIGNvbG9yKQ0KICAgIGxvY2FsIHAgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHgxLCB5MSwgejEpKQ0KCWxvY2FsIHB4LCBweSA9IHAueCwgcC55DQoJbG9jYWwgYyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoeDIsIHkyLCB6MikpDQoJbG9jYWwgY3gsIGN5ID0gYy54LCBjLnkNCgkJCURyYXdMaW5lKGN4LCBjeSwgcHgsIHB5LCAzLCAweEZGRkYwMDAwKQ0KZW5kDQoNCmZ1bmN0aW9uIENESGFuZGxlcigpDQoJLS0gU3BlbGxzDQoJU2tpbGxzLlNraWxsUS5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZKQ0KCVNraWxscy5Ta2lsbFcucmVhZHkgPSAobXlIZXJvOkNhblVzZVNwZWxsKF9XKSA9PSBSRUFEWSkNCglTa2lsbHMuU2tpbGxFLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkpDQoJU2tpbGxzLlNraWxsUi5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1IpID09IFJFQURZKQ0KCVJhbmdlcy5BQSA9IG15SGVyby5yYW5nZQ0KZW5kDQoNCmZ1bmN0aW9uIFZQQ2FzdFEodGFyZ2V0KQ0KCWZvciBpLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJCQlpZiBNT0hDb25maWcuUHJlZFNldHRpbmdzLlNlbGVjdFByZWRpY3Rpb24gPT0gMiB0aGVuDQoJCQkJbG9jYWwgQ2FzdFBvc2l0aW9uLCAgSGl0Q2hhbmNlLCAgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRhcmdldCwgU2tpbGxzLlNraWxsUS5kZWxheSwgU2tpbGxzLlNraWxsUS53aWR0aCwgU2tpbGxzLlNraWxsUS5yYW5nZSwgU2tpbGxzLlNraWxsUS5zcGVlZCwgbXlIZXJvLCB0cnVlKQ0KICAgICAgICAgICAgCWlmIEhpdENoYW5jZSA+PSBNT0hDb25maWcuSENTZXR0aW5ncy5IaXRDaGFuY2VRIGFuZCBHZXREaXN0YW5jZShDYXN0UG9zaXRpb24pIDwgMTA1MCB0aGVuDQoJCQkJCWlmIFFSRUFEWSBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uLCBteUhlcm8pIDwgMTA1MCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubmFtZSA9PSAiVGhyZXNoUSIgYW5kIFZhbGlkVGFyZ2V0KFRhcmdldCwgU2tpbGxzLlNraWxsUS5yYW5nZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAJCUNhc3RTcGVsbChfUSwgQ2FzdFBvc2l0aW9uLngsIENhc3RQb3NpdGlvbi56KQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBWUENhc3RRMih0YXJnZXQpDQoJbG9jYWwgdGFyZ2V0ID0gR2V0VGFyZ2V0KCkNCgkJaWYgdGFyZ2V0IH49IG5pbCB0aGVuDQoJCQlpZiBzdHJpbmcuZmluZCh0YXJnZXQudHlwZSwgIkhlcm8iKSBhbmQgdGFyZ2V0LnRlYW0gfj0gbXlIZXJvLnRlYW0gdGhlbg0KCQkJCXRhcmdldE9iaiA9IHRhcmdldA0KCQkJZW5kDQoJCWVuZA0KDQoJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJCWlmIE1PSENvbmZpZy5QcmVkU2V0dGluZ3MuU2VsZWN0UHJlZGljdGlvbiA9PSAyIHRoZW4NCgkJCWxvY2FsIENhc3RQb3NpdGlvbiwgIEhpdENoYW5jZSwgIFBvc2l0aW9uID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbih0YXJnZXQsIFNraWxscy5Ta2lsbFEuZGVsYXksIFNraWxscy5Ta2lsbFEud2lkdGgsIFNraWxscy5Ta2lsbFEucmFuZ2UsIFNraWxscy5Ta2lsbFEuc3BlZWQsIG15SGVybywgdHJ1ZSkNCiAgICAgICAgICAgIGlmIEhpdENoYW5jZSA+PSBNT0hDb25maWcuSENTZXR0aW5ncy5IaXRDaGFuY2VRIGFuZCBHZXREaXN0YW5jZShDYXN0UG9zaXRpb24pIDwgMTA1MCB0aGVuDQoJCQkJaWYgUVJFQURZIGFuZCBHZXREaXN0YW5jZShDYXN0UG9zaXRpb24sIG15SGVybykgPCAxMDUwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lID09ICJUaHJlc2hRIiBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0LCBTa2lsbHMuU2tpbGxRLnJhbmdlKSB0aGVuDQogICAgICAgICAgICAgICAgICAgCQlDYXN0U3BlbGwoX1EsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0USh1bml0LCBwb3MpDQogICAgaWYgR2V0RGlzdGFuY2UocG9zKSA8IFNraWxscy5Ta2lsbFEucmFuZ2UgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLm5hbWUgPT0gIlRocmVzaFEiIHRoZW4NCiAgICAgICAgbG9jYWwgcG9zLCBpbmZvID0gUHJvZGljdGlvbi5HZXRQcmVkaWN0aW9uKHVuaXQsIFNraWxscy5Ta2lsbFEucmFuZ2UsIFNraWxscy5Ta2lsbFEuc3BlZWQsIFNraWxscy5Ta2lsbFEuZGVsYXksIFNraWxscy5Ta2lsbFEud2lkdGgpDQogICAgCWlmIHBvcyBhbmQgbm90IGluZm8ubUNvbGxpc2lvbigpIHRoZW4NCgkJCUNhc3RTcGVsbChfUSwgcG9zLngsIHBvcy56KQ0KICAgIAllbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0UTIoKQ0KCWlmIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLm5hbWUgPT0gInRocmVzaHFsZWFwIiB0aGVuDQoJCUNhc3RTcGVsbChfUSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0RSh0YXJnZXQpDQoJbG9jYWwgQ2FzdFBvc2l0aW9uLCAgSGl0Q2hhbmNlLCAgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRhcmdldCwgU2tpbGxzLlNraWxsRS5kZWxheSwgU2tpbGxzLlNraWxsRS53aWR0aCwgU2tpbGxzLlNraWxsRS5yYW5nZSwgU2tpbGxzLlNraWxsRS5zcGVlZCwgbXlIZXJvKQ0KCVBvc1ggPSBteUhlcm8ueCArIChteUhlcm8ueCAtIENhc3RQb3NpdGlvbi54KQ0KCVBvc1ogPSBteUhlcm8ueiArIChteUhlcm8ueiAtIENhc3RQb3NpdGlvbi56KQ0KCWZvciBpLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJCQlpZiBIaXRDaGFuY2UgPj0gTU9IQ29uZmlnLkhDU2V0dGluZ3MuSGl0Q2hhbmNlRSBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA8IDQ1MCBhbmQgVmFsaWRUYXJnZXQodHMudGFyZ2V0LCBTa2lsbHMuU2tpbGxFLnJhbmdlKSB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9FLCBQb3NYLCBQb3NaKQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RFMih0YXJnZXQpDQoJZm9yIGksIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlpZiBWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCiAgICAgICAgICAgIAlDYXN0UG9zaXRpb24sICBIaXRDaGFuY2UsICBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odGFyZ2V0LCBTa2lsbHMuU2tpbGxFLmRlbGF5LCBTa2lsbHMuU2tpbGxFLndpZHRoLCBTa2lsbHMuU2tpbGxFLnJhbmdlLCBTa2lsbHMuU2tpbGxFLnNwZWVkLCBteUhlcm8pDQoJCQlpZiBIaXRDaGFuY2UgPj0gTU9IQ29uZmlnLkhDU2V0dGluZ3MuSGl0Q2hhbmNlRSBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA8IDQ1MCBhbmQgVmFsaWRUYXJnZXQodHMudGFyZ2V0LCBlUmFuZ2UpIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCiAgICAgICAgICAgIGVuZA0KICAgIAllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0Vyh0YXJnZXQpDQogICAgaWYgZnJpZW5kbHlPYmogfj0gbmlsIGFuZCBmcmllbmRseU9iai52YWxpZCBhbmQgR2V0RGlzdGFuY2UoZnJpZW5kbHlPYmopIDwgU2tpbGxzLlNraWxsVy5yYW5nZSBhbmQgV1JFQURZIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lID09ICJ0aHJlc2hxbGVhcCIgdGhlbg0KICAgIAlDYXN0U3BlbGwoX1csIGZyaWVuZGx5T2JqLngsIGZyaWVuZGx5T2JqLnopDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2FzdFcyKHRhcmdldCkNCiAgICBpZiBGaW5kTmVhcmVzdEFsbHkoKSBhbmQgR2V0RGlzdGFuY2UoRmluZE5lYXJlc3RBbGx5KCkpIDwgU2tpbGxzLlNraWxsVy5yYW5nZSBhbmQgV1JFQURZIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5uYW1lID09ICJ0aHJlc2hxbGVhcCIgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoX1csIEZpbmROZWFyZXN0QWxseSgpLngsIEZpbmROZWFyZXN0QWxseSgpLnopDQogICAgZW5kDQplbmQNCg0KLS1mdW5jdGlvbiBDYXN0VzModGFyZ2V0KQ0KLS0gICAgaWYgRmluZEZhcnRoZXN0QWxseSgpIGFuZCBHZXREaXN0YW5jZShGaW5kRmFydGhlc3RBbGx5KCkpID49IFNraWxscy5Ta2lsbFcucmFuZ2UgYW5kIFdSRUFEWSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubmFtZSA9PSAidGhyZXNocWxlYXAiIHRoZW4NCi0tICAgICAgICBDYXN0U3BlbGwoX1csIEZpbmRGYXJ0aGVzdEFsbHkoKS54LCBGaW5kRmFydGhlc3RBbGx5KCkueikNCi0tICAgIGVuZA0KLS1lbmQNCg0KZnVuY3Rpb24gQ2FzdExhbnRlcm4odGFyZ2V0KQ0KCWlmIE1PSENvbmZpZy5Db21ib1NldHRpbmdzLlRocm93TGFudGVybiA9PSAxIGFuZCBmcmllbmRseU9iaiB+PSBuaWwgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShmcmllbmRseU9iaikgPCBTa2lsbHMuU2tpbGxXLnJhbmdlIGFuZCBXUkVBRFkgdGhlbg0KCQkJQ2FzdFNwZWxsKF9XLCBmcmllbmRseU9iai54LCBmcmllbmRseU9iai56KQ0KCQllbmQNCgllbHNlaWYgTU9IQ29uZmlnLkNvbWJvU2V0dGluZ3MuVGhyb3dMYW50ZXJuID09IDIgdGhlbg0KCQlpZiBHZXREaXN0YW5jZShGaW5kTmVhcmVzdEFsbHkoKSkgPCBTa2lsbHMuU2tpbGxXLnJhbmdlIGFuZCBXUkVBRFkgdGhlbg0KCQkJQ2FzdFNwZWxsKF9XLCBGaW5kTmVhcmVzdEFsbHkoKS54LCBGaW5kTmVhcmVzdEFsbHkoKS56KQ0KCQllbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBTYXZlQWxseSgpDQoJaWYgTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5ncy5TYXZlQWxseSB0aGVuDQoJCWlmIFdSRUFEWSBhbmQgQ291bnRFbmVtaWVzKDk1MCkgPj0gTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5ncy5TYXZlQWxseUNvdW50IHRoZW4NCiAgICAgICAgICAgIGZvciBrLCBhbGx5IGluIHBhaXJzKEdldEFsbHlIZXJvZXMoKSkgZG8NCgkJCQlpZiBHZXREaXN0YW5jZShhbGx5KSA8IFNraWxscy5Ta2lsbFcucmFuZ2UgdGhlbg0KCQkJCQlDYXN0U3BlbGwoX1csIEZpbmRMb3dlc3RBbGx5KCkueCwgRmluZExvd2VzdEFsbHkoKS56KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENDQWxseSgpDQoJaWYgTU9IQ29uZmlnLkxhbnRlcm5TZXR0aW5ncy5DQ0FsbHkgdGhlbg0KCSAgICAgIGZvciBrLCBhbGx5IGluIHBhaXJzKEdldEFsbHlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgIGxvY2FsIENhc3RQb3NpdGlvbiwgIEhpdENoYW5jZSwgIFBvc2l0aW9uID0gVlA6R2V0Q2lyY3VsYXJDYXN0UG9zaXRpb24oYWxseSwgU2tpbGxzLlNraWxsVy5kZWxheSwgMTUwLCBTa2lsbHMuU2tpbGxXLnJhbmdlKQ0KICAgICAgICAgICAgaWYgSGl0Q2hhbmNlID49IDQgYW5kIEdldERpc3RhbmNlKGFsbHkpIDwgU2tpbGxzLlNraWxsVy5yYW5nZSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBhbGx5LngsIGFsbHkueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBGaW5kTG93ZXN0QWxseSgpDQoJCUxvd2VzdEFsbHkgPSBuaWwNCgkJZm9yIGEgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQgZG8NCgkJCUFsbHkgPSBoZXJvTWFuYWdlcjpHZXRIZXJvKGEpDQoJCQlpZiBBbGx5LnRlYW0gPT0gbXlIZXJvLnRlYW0gYW5kIG5vdCBBbGx5LmRlYWQgYW5kIEdldERpc3RhbmNlKG15SGVybywgQWxseSkgPD0gU2tpbGxzLlNraWxsVy5yYW5nZSB0aGVuDQoJCQkJaWYgTG93ZXN0QWxseSA9PSBuaWwgdGhlbg0KCQkJCQlMb3dlc3RBbGx5ID0gQWxseQ0KCQkJCWVsc2VpZiBub3QgTG93ZXN0QWxseS5kZWFkIGFuZCAoQWxseS5oZWFsdGgvQWxseS5tYXhIZWFsdGgpIDwgKExvd2VzdEFsbHkuaGVhbHRoL0xvd2VzdEFsbHkubWF4SGVhbHRoKSB0aGVuDQoJCQkJCUxvd2VzdEFsbHkgPSBBbGx5DQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJcmV0dXJuIExvd2VzdEFsbHkNCmVuZA0KDQpmdW5jdGlvbiBGaW5kTmVhcmVzdEFsbHkoKQ0KCQlsb2NhbCBBbGx5ID0gbmlsDQogICAgICAgIGxvY2FsIE5lYXJlc3RBbGx5ID0gbmlsDQogICAgICAgIGZvciBpPTEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KICAgICAgICAgICAgICAgIEFsbHkgPSBoZXJvTWFuYWdlcjpHZXRIZXJvKGkpDQogICAgICAgICAgICAgICAgaWYgQWxseS50ZWFtID09IG15SGVyby50ZWFtIGFuZCBub3QgQWxseS5kZWFkIGFuZCBBbGx5LmNoYXJOYW1lIH49IG15SGVyby5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBOZWFyZXN0QWxseSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOZWFyZXN0QWxseSA9IEFsbHkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBHZXREaXN0YW5jZShBbGx5KSA8IEdldERpc3RhbmNlKE5lYXJlc3RBbGx5KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5lYXJlc3RBbGx5ID0gQWxseQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KCXJldHVybiBOZWFyZXN0QWxseQ0KZW5kDQoNCi0tZnVuY3Rpb24gRmluZEZhcnRoZXN0QWxseSgpDQotLQkJbG9jYWwgQWxseSA9IG5pbA0KLS0JCWxvY2FsIEZhcnRoZXN0QWxseSA9IG5pbA0KLS0JCWZvciBpPTEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KLS0JCQlBbGx5ID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KLS0JCQlpZiBBbGx5LnRlYW0gPT0gbXlIZXJvLnRlYW0gYW5kIG5vdCBBbGx5LmRlYWQgYW5kIEFsbHkuY2hhck5hbWUgfj0gbXlIZXJvLmNoYXJOYW1lIHRoZW4NCi0tCQkJCWlmIEZhcnRoZXN0QWxseSA9PSBuaWwgdGhlbg0KLS0JCQkJCQlGYXJ0aGVzdEFsbHkgPSBBbGx5DQotLQkJCQllbHNlaWYgR2V0RGlzdGFuY2UoQWxseSkgPCBHZXREaXN0YW5jZShGYXJ0aGVzdEFsbHkpIHRoZW4NCi0tCQkJCQkJRmFydGhlc3RBbGx5ID0gQWxseQ0KLS0JCQkJZW5kDQotLQkJCWVuZA0KLS0JCWVuZA0KLS1lbmQNCg0KZnVuY3Rpb24gQ2hlY2tFbmVteUluUmFuZ2UoKQ0KCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJaWYgZW5lbXkgYW5kIFZhbGlkVGFyZ2V0KGVuZW15LCBTa2lsbHMuU2tpbGxSLnJhbmdlKSBhbmQgQXJlYUVuZW15Q291bnQoZW5lbXksIDUwMCkgPj0gTU9IQ29uZmlnLkFCU2V0dGluZ3MuQXV0b0VuZW15UmFuZ2UgYW5kIGVuZW15LnZpc2libGUgdGhlbg0KCQkJQ2FzdFNwZWxsKF9SKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBBcmVhRW5lbXlDb3VudChTcG90KQ0KCWxvY2FsIGNvdW50ID0gMA0KCQlmb3IgXywgZW5lbXkgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJCWlmIGVuZW15IGFuZCBub3QgZW5lbXkuZGVhZCBhbmQgZW5lbXkudmlzaWJsZSBhbmQgR2V0RGlzdGFuY2UoU3BvdCwgZW5lbXkpIDwgU2tpbGxzLlNraWxsUi5yYW5nZSB0aGVuDQoJCQkJY291bnQgPSBjb3VudCArIDENCgkJCWVuZA0KCQllbmQgICAgICAgICAgICAgIA0KCXJldHVybiBjb3VudA0KZW5kDQoNCmZ1bmN0aW9uIENvdW50RW5lbWllcyhyYW5nZSwgdW5pdCkNCiAgICBsb2NhbCBFbmVtaWVzID0gMA0KICAgIGZvciBfLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQoZW5lbXkpIGFuZCBHZXREaXN0YW5jZShlbmVteSwgdW5pdCkgPCAocmFuZ2Ugb3IgbWF0aC5odWdlKSB0aGVuDQogICAgICAgICAgICBFbmVtaWVzID0gRW5lbWllcyArIDENCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIEVuZW1pZXMNCmVuZA0KDQotLSBDaGFuZ2Ugc2tpbiBmdW5jdGlvbiwgbWFkZSBieSBTaGFsenV0aCAtLQ0KZnVuY3Rpb24gR2VuTW9kZWxQYWNrZXQoY2hhbXAsIHNraW5JZCkNCglwID0gQ0xvTFBhY2tldCgweDk3KQ0KCXA6RW5jb2RlRihteUhlcm8ubmV0d29ya0lEKQ0KCXAucG9zID0gMQ0KCXQxID0gcDpEZWNvZGUxKCkNCgl0MiA9IHA6RGVjb2RlMSgpDQoJdDMgPSBwOkRlY29kZTEoKQ0KCXQ0ID0gcDpEZWNvZGUxKCkNCglwOkVuY29kZTEodDEpDQoJcDpFbmNvZGUxKHQyKQ0KCXA6RW5jb2RlMSh0MykNCglwOkVuY29kZTEoYml0MzIuYmFuZCh0NCwweEIpKQ0KCXA6RW5jb2RlMSgxKS0taGFyZGNvZGUgMSBiaXRmaWVsZA0KCXA6RW5jb2RlNChza2luSWQpDQoJZm9yIGkgPSAxLCAjY2hhbXAgZG8NCgkJcDpFbmNvZGUxKHN0cmluZy5ieXRlKGNoYW1wOnN1YihpLGkpKSkNCgllbmQNCglmb3IgaSA9ICNjaGFtcCArIDEsIDY0IGRvDQoJCXA6RW5jb2RlMSgwKQ0KCWVuZA0KCXA6SGlkZSgpDQoJUmVjdlBhY2tldChwKQ0KZW5kDQoNCmZ1bmN0aW9uIFNraW5DaGFuZ2VkKCkNCglyZXR1cm4gTU9IQ29uZmlnLlNraW5DaGFuZ2VyLnNraW4xIH49IExhc3RTa2luDQplbmQNCg0KLS0gRGFzaCBGZWF0dXJlcyAtLQ0KZnVuY3Rpb24gT25EYXNoRnVuYyh1bml0LCBwb3MsIHNwZWxsKQ0KDQogICAgaWYgKFFSRUFEWSkgYW5kIChHZXREaXN0YW5jZShwb3MpIC0gZ2V0SGl0Qm94UmFkaXVzKHVuaXQpLzIgPCBTa2lsbHMuU2tpbGxRLnJhbmdlKSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubmFtZSA9PSAiVGhyZXNoUSIgdGhlbg0KICAgICAgICBsb2NhbCBQcm9kaWN0UUNvbCA9IENvbGxpc2lvbihTa2lsbHMuU2tpbGxRLnJhbmdlLCBTa2lsbHMuU2tpbGxRLnNwZWVkLCBTa2lsbHMuU2tpbGxRLmRlbGF5LCBTa2lsbHMuU2tpbGxRLndpZHRoKQ0KICAgICAgICAgICAgaWYgbm90IFByb2RpY3RRQ29sOkdldE1pbmlvbkNvbGxpc2lvbihwb3MsIG15SGVybykgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSwgcG9zLngsIHBvcy56KQ0KICAgICAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gQWZ0ZXJEYXNoRnVuYyh1bml0LCBwb3MsIHNwZWxsKQ0KDQogICAgaWYgKFFSRUFEWSkgYW5kIChHZXREaXN0YW5jZShwb3MpIC0gZ2V0SGl0Qm94UmFkaXVzKHVuaXQpLzIgPCBTa2lsbHMuU2tpbGxRLnJhbmdlKSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubmFtZSA9PSAiVGhyZXNoUSIgdGhlbg0KICAgICAgICBsb2NhbCBQcm9kaWN0UUNvbCA9IENvbGxpc2lvbihTa2lsbHMuU2tpbGxRLnJhbmdlLCBTa2lsbHMuU2tpbGxRLnNwZWVkLCBTa2lsbHMuU2tpbGxRLmRlbGF5LCBTa2lsbHMuU2tpbGxRLndpZHRoKQ0KICAgICAgICAgICAgaWYgbm90IFByb2RpY3RRQ29sOkdldE1pbmlvbkNvbGxpc2lvbihwb3MsIG15SGVybykgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSwgcG9zLngsIHBvcy56KQ0KICAgICAgICAgICAgZW5kDQogICAgZW5kDQoNCmVuZA0KDQpmdW5jdGlvbiBBZnRlckltbW9iaWxlRnVuYyh1bml0LCBwb3MsIHNwZWxsKQ0KDQogICAgaWYgKFFSRUFEWSkgYW5kIChHZXREaXN0YW5jZShwb3MpIC0gZ2V0SGl0Qm94UmFkaXVzKHVuaXQpLzIgPCBTa2lsbHMuU2tpbGxRLnJhbmdlKSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubmFtZSA9PSAiVGhyZXNoUSIgdGhlbg0KICAgICAgICBsb2NhbCBQcm9kaWN0UUNvbCA9IENvbGxpc2lvbihTa2lsbHMuU2tpbGxRLnJhbmdlLCBTa2lsbHMuU2tpbGxRLnNwZWVkLCBTa2lsbHMuU2tpbGxRLmRlbGF5LCBTa2lsbHMuU2tpbGxRLndpZHRoKQ0KICAgICAgICAgICAgaWYgbm90IFByb2RpY3RRQ29sOkdldE1pbmlvbkNvbGxpc2lvbihwb3MsIG15SGVybykgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUSwgcG9zLngsIHBvcy56KQ0KICAgICAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gT25JbW1vYmlsZUZ1bmModW5pdCwgcG9zLCBzcGVsbCkNCg0KICAgIGlmIChRUkVBRFkpIGFuZCAoR2V0RGlzdGFuY2UocG9zKSAtIGdldEhpdEJveFJhZGl1cyh1bml0KS8yIDwgU2tpbGxzLlNraWxsUS5yYW5nZSkgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLm5hbWUgPT0gIlRocmVzaFEiIHRoZW4NCiAgICAgICAgbG9jYWwgUHJvZGljdFFDb2wgPSBDb2xsaXNpb24oU2tpbGxzLlNraWxsUS5yYW5nZSwgU2tpbGxzLlNraWxsUS5zcGVlZCwgU2tpbGxzLlNraWxsUS5kZWxheSwgU2tpbGxzLlNraWxsUS53aWR0aCkNCiAgICAgICAgICAgIGlmIG5vdCBQcm9kaWN0UUNvbDpHZXRNaW5pb25Db2xsaXNpb24ocG9zLCBteUhlcm8pIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIHBvcy54LCBwb3MueikNCiAgICAgICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIEdldFFQb3ModW5pdCwgcG9zKQ0KICAgICAgICBRUG9zID0gcG9zDQplbmQNCg0KZnVuY3Rpb24gT25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpDQogIGlmIE1PSENvbmZpZy5TUFNldHRpbmdzLkdhcENsb3NlciBhbmQgRVJFQURZIHRoZW4NCiAgICBpZiB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gdGhlbg0KICAgICAgbG9jYWwgc3BlbGxOYW1lID0gc3BlbGwubmFtZQ0KICAgICAgaWYgR2FwQ2xvc2VyTGlzdFt1bml0LmNoYXJOYW1lXSBhbmQgc3BlbGxOYW1lID09IEdhcENsb3Nlckxpc3RbdW5pdC5jaGFyTmFtZV0uc3BlbGwgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgMjAwMCB0aGVuDQogICAgICAgIGlmIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5uYW1lID09IG15SGVyby5uYW1lIG9yIEdhcENsb3Nlckxpc3RbdW5pdC5jaGFyTmFtZV0uc3BlbGwgPT0gJ2JsaW5kbW9ua3F0d28nIHRoZW4NCiAgICAgICAgICBsb2NhbCBDYXN0UG9zaXRpb24sIEhpdENoYW5jZSwgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHVuaXQsIFNraWxscy5Ta2lsbEUuZGVsYXksIFNraWxscy5Ta2lsbEUud2lkdGgsIFNraWxscy5Ta2lsbEUucmFuZ2UsIFNraWxscy5Ta2lsbEUuc3BlZWQsIG15SGVybykgDQogICAgICAgICAgQ2FzdFNwZWxsKF9FLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQogICAgICAgIGVsc2VpZiBHYXBDbG9zZXJMaXN0W3VuaXQuY2hhck5hbWVdLnNwZWxsID09ICdMZW9uYVplbml0aEJsYWRlJyB0aGVuDQogICAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIFBvc2l0aW9uID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbih1bml0LCBTa2lsbHMuU2tpbGxFLmRlbGF5LCBTa2lsbHMuU2tpbGxFLndpZHRoLCBTa2lsbHMuU2tpbGxFLnJhbmdlLCBTa2lsbHMuU2tpbGxFLnNwZWVkLCBteUhlcm8pIA0KICAgICAgICAgIAlpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5uYW1lID09ICJUaHJlc2hFIiB0aGVuIEV0aW1lID0gb3MuY2xvY2soKSBlbmQNCiAgICAgICAgICAJRXRpbWUgPSBvcy5jbG9jaygpICsgMg0KICAgICAgICAgIAlDYXN0U3BlbGwoX0UsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGlmIE1PSENvbmZpZy5TUFNldHRpbmdzLkludGVycnVwdCBhbmQgRVJFQURZIGFuZCBNT0hDb25maWcuU1BTZXR0aW5ncy5JbnRlcnJ1cHRNb2RlID09IDIgb3IgMyB0aGVuDQogICAgaWYgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IFNraWxscy5Ta2lsbEUucmFuZ2UgdGhlbg0KICAgICAgbG9jYWwgc3BlbGxOYW1lID0gc3BlbGwubmFtZQ0KICAgICAgZm9yIGkgPSAxLCAjSW50ZXJydXB0TGlzdCBkbw0KICAgICAgICBpZiB1bml0LmNoYXJOYW1lID09IEludGVycnVwdExpc3RbaV0uY2hhck5hbWUgYW5kIHNwZWxsTmFtZSA9PSBJbnRlcnJ1cHRMaXN0W2ldLnNwZWxsTmFtZSB0aGVuDQogICAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIFBvc2l0aW9uID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbih1bml0LCBTa2lsbHMuU2tpbGxFLmRlbGF5LCBTa2lsbHMuU2tpbGxFLndpZHRoLCBTa2lsbHMuU2tpbGxFLnJhbmdlLCBTa2lsbHMuU2tpbGxFLnNwZWVkLCBteUhlcm8pIA0KICAgICAgICAgIENhc3RTcGVsbChfRSwgQ2FzdFBvc2l0aW9uLngsIENhc3RQb3NpdGlvbi56KQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgaWYgTU9IQ29uZmlnLlNQU2V0dGluZ3MuSW50ZXJydXB0IGFuZCBRUkVBRFkgYW5kIE1PSENvbmZpZy5TUFNldHRpbmdzLkludGVycnVwdE1vZGUgPT0gMSBvciAzIHRoZW4NCiAgCWlmIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBTa2lsbHMuU2tpbGxRLnJhbmdlIHRoZW4NCiAgICAgIGxvY2FsIHNwZWxsTmFtZSA9IHNwZWxsLm5hbWUNCiAgICAgIGZvciBpID0gMSwgI0ludGVycnVwdExpc3QgZG8NCiAgICAgICAgaWYgdW5pdC5jaGFyTmFtZSA9PSBJbnRlcnJ1cHRMaXN0W2ldLmNoYXJOYW1lIGFuZCBzcGVsbE5hbWUgPT0gSW50ZXJydXB0TGlzdFtpXS5zcGVsbE5hbWUgdGhlbg0KICAgICAgICAgIGxvY2FsIENhc3RQb3NpdGlvbiwgSGl0Q2hhbmNlLCBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odW5pdCwgU2tpbGxzLlNraWxsUS5kZWxheSwgU2tpbGxzLlNraWxsUS53aWR0aCwgU2tpbGxzLlNraWxsUS5yYW5nZSwgU2tpbGxzLlNraWxsUS5zcGVlZCwgbXlIZXJvKSANCiAgICAgICAgICBDYXN0U3BlbGwoX1EsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQgDQogIGVuZCANCmVuZA0KDQpmdW5jdGlvbiBPbkJ1Z3NwbGF0KCkNCglVcGRhdGVXZWIoZmFsc2UsIFNjcmlwdE5hbWUsIGlkLCBIV0lEKQ0KZW5kDQoNCmZ1bmN0aW9uIE9uVW5sb2FkKCkNCglVcGRhdGVXZWIoZmFsc2UsIFNjcmlwdE5hbWUsIGlkLCBIV0lEKQ0KZW5kDQoNCi0tIEhlcmUgaXMgb25lIEkgYWRkZWQgdG8gbXkgT25UaWNrIHRvIGRldGVjdCB0aGUgZW5kIG9mIHRoZSBnYW1lDQppZiBHZXRHYW1lKCkuaXNPdmVyIHRoZW4NCglVcGRhdGVXZWIoZmFsc2UsIFNjcmlwdE5hbWUsIGlkLCBIV0lEKQ0KCS0tIFRoaXMgaXMgYSB2YXIgd2hlcmUgSSBzdG9wIGV4ZWN1dGluZyB3aGF0IGlzIGluIG15IE9uVGljaygpDQoJc3RhcnRVcCA9IGZhbHNlOw0KZW5k"), nil, "bt", _ENV))()
